/*! Based on work by Simon Willison: http://gist.github.com/292562 */

/*! Weakdata - https://gist.github.com/b84827b7af6da78acb67ca75839cf1c6 by @allex | MIT License */

/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/

define("lib/core/1.0.0/utils/util",["require","exports","module"],function(e,t,n){"use strict";function i(e){return"object"==typeof e&&null!==e}function o(){}function r(e,t){for(var n=e.length,i=-1;++i<n;)t(e[i],i)}function a(e,t){for(var n in e)p.call(e,n)&&t(e[n],n,e)}function s(e,t){return e&&e.forEach?e.forEach(t):void(h(e)?r(e,t):a(e,t))}function u(e,t){for(var n=-1,i=e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}function c(e,t){var n=[];return s(e,function(e,i,o){n.push(t(e,i,o))}),n}function l(e,t){if(!t||!i(t))return e;for(var n=v(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}function f(e){"?"===e.charAt(0)&&(e=e.substr(1));for(var t,n={},i=e.split("&"),o=-1,r=i.length;++o<r;)t=i[o].split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return n}var d=new Function("return this")(),p=Object.prototype.hasOwnProperty,h=Array.isArray||function(e){return e&&e instanceof Array},g=function(){var e=(+new Date).toString(36),t=-1;return function(n){return(n||"")+e+ ++t}}(),v=Object.keys||function(e){var t=[];return a(e,function(e,n){t.push(n)}),t},m="function"==typeof Object.create?function(e,t){e.__super__=t.prototype,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(){function e(e){this.constructor=e}return function(t,n){t.__super__=n.prototype,e.prototype=n.prototype,t.prototype=new e(t)}}(),y=d.console||(d.console={});r(["log","error","trace","warn","info"],function(e){y[e]||(y[e]=o)}),t.extend=function(e,t){for(var n=[].slice.call(arguments,1),i=n.length,o=-1;++o<i;)l(e,n[o]);return e},t.inherits=function(e,t,n){m(e,t),n&&l(e.prototype,n)},t.impls=function(e,n){return n="function"==typeof n?n.prototype:n,t.mix(e.prototype,n),e},t.parseQuery=f,t.parseParams=f,t.each=s,t.map=function(e,t){var n=h(e)?u:c;return n(e,t)},t.filter=function(e,t){var n,i,o=h(e)?(n=r,i=function(e,t){o.push(t)},[]):(n=a,i=function(e,t){o[e]=t},{});return n(e,function(e,n){t(e,n)&&i(n,e)}),o},t.mix=function e(t,n,i,o,r){for(var a in n)n.hasOwnProperty(a)&&(n[a]&&t[a]&&i&&"object"==typeof n[a]?e(t[a],n[a],i,o,r):(void 0===t[a]||o)&&(r&&!r(t[a],n[a])||(t[a]=n[a])));return t},t.guid=g,t.setImmediate=function(){var e=d.document,t=d.postMessage,n=d.setImmediate;return n?n:"onreadystatechange"in e.createElement("script")?function(t){function n(){i.onreadystatechange=null,i.parentNode.removeChild(i),t()}var i=e.createElement("script");i.onreadystatechange=n,e.documentElement.appendChild(i)}:t?function(e){function n(t){t.data===i&&(d.removeEventListener("message",n,!0),e())}var i=g();d.addEventListener("message",n,!0),t(i,"*")}:function(e){d.setTimeout(e,0)}}(),t.noop=o,t.throttle=function(e,t){if(t=t?t:150,t===-1)return function(){e.apply(this,arguments)};var n;return function(){var i=+new Date;(!n||i-n>t)&&(n=i,e.apply(this,arguments))}},t.debounce=function(e,t,n,i){var o;return function(){var r=i||this,a=arguments,s=function(){o=null,n||e.apply(r,a)},u=n&&!o;clearTimeout(o),o=setTimeout(s,t),u&&e.apply(r,a)}},t.deprecate=function(e,t){function n(){return i||(i=!0),e.apply(this,arguments)}if(d.noDeprecation===!0)return e;var i=!1;return n}}),define("lib/ui/box/1.0.1/drag",["require","jquery"],function(e){"use strict";var t=e("jquery"),n=t(window),i=t(document),o="createTouch"in document,r=document.documentElement,a=!("minWidth"in r.style),s=!a&&"onlosecapture"in r,u="setCapture"in r,c=t.noop,l={start:o?"touchstart":"mousedown",over:o?"touchmove":"mousemove",end:o?"touchend":"mouseup"},f=o?function(e){return e.touches||(e=e.originalEvent.touches.item(0)),e}:function(e){return e},d=function(){this.start=t.proxy(this.start,this),this.over=t.proxy(this.over,this),this.end=t.proxy(this.end,this),this.onstart=this.onover=this.onend=c};return d.types=l,d.prototype={start:function(e){return e=this.startFix(e),i.on(l.over,this.over).on(l.end,this.end),this.onstart(e),!1},over:function(e){return e=this.overFix(e),this.onover(e),!1},end:function(e){return e=this.endFix(e),i.off(l.over,this.over).off(l.end,this.end),this.onend(e),!1},startFix:function(e){return e=f(e),this.target=t(e.target),this.selectstart=function(){return!1},i.on("selectstart",this.selectstart).on("dblclick",this.end),s?this.target.on("losecapture",this.end):n.on("blur",this.end),u&&this.target[0].setCapture(),e},overFix:function(e){return e=f(e)},endFix:function(e){return e=f(e),i.off("selectstart",this.selectstart).off("dblclick",this.end),s?this.target.off("losecapture",this.end):n.off("blur",this.end),u&&this.target[0].releaseCapture(),e}},d.create=function(e,o,r){r=t.extend({hook:null,onstart:c,onover:c,onend:c},r);var a,s,u,l,f=t(e),p=r.hook?t(r.hook):f,h=new d,g=d.types.start,v=e.className.replace(/^\s|\s.*/g,"")+"-drag-start",m={off:function(){p.off(g,h.start)}};return h.onstart=function(t){var o="fixed"===f.css("position"),c=i.scrollLeft(),d=i.scrollTop(),p=f.width(),h=f.height();a=0,s=0,u=o?n.width()-p+a:i.width()-p,l=o?n.height()-h+s:i.height()-h;var g=f.offset(),m=this.startLeft=o?g.left-c:g.left,y=this.startTop=o?g.top-d:g.top;this.clientX=t.clientX,this.clientY=t.clientY,f.addClass(v),r.onstart.call(e,t,m,y)},h.onover=function(t){var n=t.clientX-this.clientX+this.startLeft,i=t.clientY-this.clientY+this.startTop,o=f[0].style;n=Math.max(a,Math.min(u,n)),i=Math.max(s,Math.min(l,i)),o.left=n+"px",o.top=i+"px",r.onover.call(e,t,n,i)},h.onend=function(t){var n=f.position(),i=n.left,o=n.top;f.removeClass(v),r.onend.call(e,t,i,o)},h.off=function(){p.off(g,h.start)},o?h.start(o):p.on(g,h.start),m},d}),function(e,t){if("function"==typeof define&&define.amd)define("lib/core/1.0.0/event/emitter",t);else if("undefined"!=typeof module)t(require,module.exports,module);else{var n={exports:{}};t(null,n.exports,n),e.EventEmitter=n.exports}}(this,function(e,t,n){"use strict";function i(){}function o(e,t,n,i){var o=!0;if(t)for(var r,a,s,u=-1,c={type:e,timeStamp:l()};r=t[++u];){a=r[g],s=r[v]||i;try{o=r[m]===h?a.call(s,c,n)!==!1&&o:a.apply(s,n)!==!1&&o}catch(e){setTimeout(function(){console.error(e)},1)}}return o}function r(e){var t,n=d(this);return n?(t=n[e],t.length):0}function a(e){return"[object Function]"===Object.prototype.toString.call(e)}function s(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function u(e,t){e.forEach?e.forEach(t):function(e){for(var n=-1,i=e.length;++n<i;)t(e[n],n)}(e)}var c=/\s+/,l=Date.now||function(){return+new Date},f=function(){return l()*Math.random()&65535}(),d=function(){var e,t,n;return"function"==typeof WeakMap&&(WeakMap.prototype||0).set?(e=new WeakMap,function(t,n){var i=e.get(t);return null===n?void 0!==i&&e.delete(t):!i&&n?(e.set(t,i={}),i):i}):(t=l(),n="__$widΦ"+t.toString(36),e={},function(i,o){if(!i||"object"!=typeof i)throw TypeError("Invalid value used as weak map key");var r;return null===o?i[n]&&(delete e[i[n]],delete i[n]):(r=i[n]||o&&(r=++t,e[r]={},i[n]=r),r&&e[r])})}(),p=1,h=2,g=0,v=1,m=2,y=function(e,t,n){var i=[];return i[g]=e,i[v]=t,i[m]=n,i},b=i.prototype;b.addListener=function(e,t,n,i){var o,r,a,s=p;if(t&&"object"==typeof t&&(n=t,t=n.handleEvent,s=h),!t)return this;for(o=d(this,1),e=e.split(c);r=e.shift();)a=!i&&o[r]||(o[r]=[]),a.push(y(t,n,s));return this},b.on=b.addListener,b.once=function(e,t,n){var i=!1,o=function(){this.removeListener(e,o),i||(i=!0,t.apply(n||this,arguments))};return o.guid=t.guid||(t.guid=f++),this.on(e,o)},b.removeListener=function(e,t,n){var i,o,r,a,u,l;if(t&&"object"==typeof t&&(n=t,t=n.handleEvent),!(i=d(this)))return this;if(!(e||t||n))return s(i,function(e,t){delete i[t]}),d(this,null),this;for(e=e?e.split(c):x(i);o=e.shift();)if(r=i[o])if(t||n)for(a=r.length;--a>=0;)u=r[a],l=u[g],t&&l!==t&&(void 0===l.guid||l.guid!==t.guid)||n&&u[v]!==n||r.splice(a,1);else delete i[o];return this},b.un=b.removeListener,b.removeAllListeners=function(e){return this.removeListener(e)},b.emit=function(e){var t,n,i,r,a,s,u=[],l=!0;if(!(t=d(this)))return this;for(e=e.split(c),a=1,s=arguments.length;a<s;a++)u[a-1]=arguments[a];for(;n=e.shift();)(i=t.all)&&(i=i.slice()),(r=t[n])&&(r=r.slice()),"all"!==n&&(l=o(n,r,u,this)&&l),l=o(n,i,[n].concat(u),this)&&l;return l},i.applyTo=function(e){function t(t,i){e[t]=function(){var o=n[t].apply(i||e,Array.prototype.slice.call(arguments));return o===i?this:o}}var n=b,i=x(n);a(e)?u(i,function(t){e.prototype[t]=n[t]}):u(i,function(e){t(e)})},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):r.call(e,t)},b.listenerCount=r;var x=Object.keys||function(e){var t=[];return s(e,function(e,n){t.push(n)}),t};n.exports=i}),define("lib/core/1.0.0/dom/delegator",["require","exports","module","jquery","../event/emitter"],function(e,t,n){"use strict";function i(e,t){var n,i,r,a=t.currentTarget,s=o(a),u=(t.handleObj||0).origType||t.type;if(!t.isPropagationStopped())return!s.attr("disabled")&&(n=s.attr("action-type"))&&(i=s.attr("action-data"),t.action=n,t.data=i,r=e.e.emit(u+c+n,t,a),t.actionValue=r,r===!1&&(t.preventDefault(),t.stopPropagation())),e.opts.onDelegate(t),r}var o=e("jquery"),r=e("../event/emitter"),a=/\S+/g,s=-1,u=(+new Date).toString(36),c="/",l=function(){return u+ ++s},f=function(e,t){var n=e.guid||(e.guid=l()),i=function(n,i){return e.call(t||i,n)};return i.guid=n,i},d=function(){},p=function(e,t){return"function"==typeof e?e:t},h=function(e,t){t=t||{},"string"==typeof e&&(e=o(e)[0]);var n={},s={},u=new r,l=t.context,h={o:n,opts:t,e:u},g=function(e){return i(h,e)};return t.onDelegate=p(t.onDelegate,d),n.on=function(t,n,i){if("function"==typeof n&&(i=n,n=t,t="click"),"function"!=typeof i)throw Error("The delegate handler should be a valid function");n=(n||"").match(a)||[];for(var r=n.length;r--;)s[t]||(s[t]=1,o(e).on(t,"[action-type]",g)),u.on(t+c+n[r],f(i,l));return this},n.un=function(t,n,i){"function"!=typeof n&&n||(i=n,n=t,t="click"),n=(n||"").match(a)||[];var r,s=n.length;for(o(e);s--;)r=t+c+n[s],u.un(r,i);return this},n.fire=function(t,n){n||(n=t,t="click");var i=o('[action-type="'+n+'"]',e)[0]||document,r=new o.Event(t);r.currentTarget=r.target=i,u.emit(t+c+n,r,i)},n.destroy=function(){var i=o(e);o.each(s,function(e,t){delete s[e],i.off(e,"[action-type]",g)}),u.un();for(var r in n)delete n[r];u=void 0,t=void 0,s=i=e=void 0,g=null},n};n.exports=h}),define("lib/core/1.0.0/utils/css",["require","exports","module","jquery","./util"],function(e,t,n){"use strict";function i(e){return c("<"+e+"/>")[0]}function o(e,t,n){e.insertRule?e.insertRule(t+" {"+n+"}",0):e.addRule(t,n,1)}function r(){var e,t,n,i,o,a="";for(e=document.body||document.documentElement,n=e.style,i="Transition",o=["Moz","Webkit","Khtml","O","ms"],t=0;t<o.length;){if(void 0!==n[o[t]+i]){a=o[t];break}t++}return r=function(){return a},a}function a(){var e=r();return e?"-v-".replace("v",e.toLowerCase()):""}function s(e){return"number"==typeof e?e:{fast:200,normal:500,slow:1e3}[e]||500}function u(e,t,n,i,o){var r,a,u=c(e),l=arguments,o="boolean"==typeof l[l.length-1]&&l[l.length-1],h=!1,g=function(){v()},v=function(e){h||m(!0)},m=function(e){h||(h=!0,v=f,u.off(y,g),r&&(clearTimeout(r),r=null),u.removeClass(a),e&&i(),u=null)};return"function"==typeof n&&(i=n,n=void 0),i=i||f,p?(n=n||"normal",t=t||"shake",a=["ui-animated","ui-speed-"+n,"ui-ani-"+t].join(" "),u.on(y,g),r=setTimeout(g,s(n)+100),o===!0?d(function(){u.addClass(a)}):u.addClass(a)):d(function(){i&&i()}),{stop:function(){return m.apply(null,arguments),this}}}var c=e("jquery"),l=e("./util"),f=(l.each,l.noop),d=l.setImmediate,p=a(),h=/\-v\-/g,g=document.getElementsByTagName("head")[0].appendChild(i("style")),v=g.sheet||g.styleSheet,m={".ui-animated":"-v-animation-fill-mode: both;",".ui-animated.ui-speed-normal":"-v-animation-duration: 0.5s;",".ui-animated.ui-speed-fast":"-v-animation-duration: 0.2s;",".ui-animated.ui-speed-slow":"-v-animation-duration: 1s;"},y={"-webkit-":"webkitAnimationEnd","-moz-":"animationend","-o-":"OAnimationEnd","-ms-":"msAnimationEnd","":"animationend"}[p];l.each(m,function(e,t){e&&o(v,t,e.replace(h,p))}),t.effect=u,t.getVendorPrefix=r}),define("lib/ui/box/1.0.1/popup",["require","exports","module","jquery","../../../core/1.0.0/utils/util","../../../core/1.0.0/utils/css","../../../core/1.0.0/event/emitter"],function(e,t,n){"use strict";function i(e){var t=this,n={autofocus:!0,fixed:!1,align:"bl",className:"",clickBlankToHide:!1,appendTo:"body",autoRelease:!1,html:"",modal:!1,showWithAni:"bounceIn:fast",hideWithAni:"bounceOut:fast"};t._=e=x(n,e),e.fixed=!!e.fixed&&j();var r=o('<div class="'+g+'" id="'+(e.id||b())+'" />').css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(e.html),a=o("<div />");if(t._popup=r,t._mask=t._shadow=a,t.node=r[0],t.mask=a[0],t.on("render",function(e){var n,o=e.className,a=t._mask,s=e.zIndex;r.html()||r.html(e.html),o&&r.addClass(o),r.css("position",e.fixed?"fixed":"absolute"),s&&r.css("zIndex",s),e.modal&&(r.addClass(g+"-modal"),n={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:s||i.zIndex,backgroundColor:"#000",opacity:.3},j()||x(n,{position:"absolute",width:l.width()+"px",height:f.height()+"px"}),a.attr("tabIndex",0).on("focus",_(t.focus,t)),t._shadow=a.clone(!0),a.css(n).addClass(g+"-mask"))}),t.on("beforeShow",function(e){var n=t.anchor,i=t._dirClass;!n&&i&&(r.removeClass(i),delete t._dirClass)}),t.on("show",function(e){t.resize(),e.modal&&(t._mask.insertBefore(r).css("display","block"),t._shadow.insertAfter(r)),e.autofocus&&t.focus()}),t.on("hide",function(e){t._mask.remove(),t._shadow.remove(),t.blur()}),t.once("destroy",function(){r.off(),r=null,t._mask.off(),t._shadow.off()}),!h){var s=_(t.resize,t);t.on("render",function(){l.on("resize",s)}),t.on("destroy",function(){l.off("resize",s)})}t.destroyed=!1,t.initialized=!0}var o=e("jquery"),r=e("../../../core/1.0.0/utils/util"),a=e("../../../core/1.0.0/utils/css"),s=e("../../../core/1.0.0/event/emitter"),u=window,c=u.document,l=o(u),f=o(c),d=c.documentElement,p=/\S+/g,h=!("minWidth"in d.style),g="ui-layer",v=u.Math,m=v.max,y=v.ceil,b=r.guid,x=r.extend,w=r.each,_=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},C=r.setImmediate,T=function(e){return u.parseInt(e,10)||0},k=function(e){return e&&1===e.nodeType},j=function(){return j._||(j._=function(){var e=c.createElement("div"),t=e.cloneNode(!1),n=!1,i=c.body||function(){return n=!0,d.appendChild(c.createElement("body"))}();e.style.cssText="position:fixed;top:42px",i.appendChild(e),i.appendChild(t);var o=e.offsetTop!==t.offsetTop;return i.removeChild(e),i.removeChild(t),n&&d.removeChild(i),e=t=null,o}())},A=function(){return{x:f.scrollLeft(),y:f.scrollTop()}},$=function(e){return{w:e.width(),h:e.height()}},P=function(){return $(l)},z=function(e){var t=k(e),n=t?o(e).offset():{left:e.pageX,top:e.pageY};e=t?e:e.target;var i=e.ownerDocument;if(i===u.document)return n;var r=i.defaultView||i.parentWindow,a=r.frameElement,s=A(),c=o(a).offset();return{left:n.left+c.left-s.x,top:n.top+c.top-s.y}},E=function(e,t){if(e.length){var n=T(e.css(t))||e[0]["offset"+t.charAt(0).toUpperCase()+t.slice(1)],i={width:["left","right"],height:["top","bottom"]};return w(i[t],function(t,i){n+=T(e.css("margin-"+t),10)||0}),n}return 0},I=function(e){return E(e,"width")},S=function(e){return E(e,"height")},q=function(){try{var e=c.activeElement,t=e.contentDocument;return t&&t.activeElement||e}catch(e){}},N=function(e){e=e||"";var t={auto:!0},n=e.slice(-1);"!"===n&&(t.auto=!1,e=e.slice(0,-1));for(var i,e=e.length<=2?e.split(""):e.replace(/^\s+|\s+$/g,"").split(" ").slice(0,2),o={},r={t:"t",b:"t",l:"l",r:"l"},a=-1,s=e.length;++a<s;)i=e[a].charAt(0),!i||o[r[i]]?e.splice(a,1):(e[a]=i,o[r[i]]=1);return 2===e.length&&e[0]===e[1]&&e.pop(),t.align=e,t};r.inherits(i,s,{open:!1,destroyed:!0,node:null,mask:null,emit:function(e){for(var t=(e||"").match(p)||[],n=t.length;n--;){var o=this["on"+t[n]],r=Array.prototype.slice.call(arguments,1);"function"==typeof o&&o.apply(this,r)}i.__super__.emit.apply(this,arguments)},$:function(e,t){var n=this._nodes||(this._nodes={}),i=n[e];return(!i||t&&0===i.length)&&(i=this._popup.find('[node-type="'+e+'"]'),t&&i.length>0&&(n[e]=i)),!t||i.length?i:null},show:function(e,t){var n,i=this,o=i._,r=e,s=null,u=i._anim;if(u&&u.stop(!0),i.destroyed||o.showing||i.open)return i;t=x({},i._,t),void 0!==r&&(n=typeof r,"boolean"===n?t.modal=r:r&&"object"===n&&(k(r)||k(r.target)?s=r:x(t,r)));var c=i._popup,l=t.showWithAni,f=function(){delete o.showing,i.emit("shown")};if(i._ready||(i.emit("render",t),i._ready=!0),i.open=!0,i.anchor=s,i._activeElement=q(),i.emit("beforeShow",t),c.appendTo(t.appendTo).css("display","block"),i.emit("show",t),o.showing=!0,l&&"none"!==l){var d=l.split(":");i._anim=a.effect(i.node,d[0],d[1],f)}else f();return i},hide:function(e){var t,n=this,i=n._,o=n.node,r=i.hideWithAni,s=n._anim;if(s&&s.stop(!0),n.destroyed||i.hidding||!n.open)return n;if(n.emit("beforeHide"),i.hidding=!0,t=function(){i.hidding===!0&&(o.parentNode.removeChild(o),n._popup.hide(),delete i.hidding,n.open=!1,n.emit("hidden"),(e||i.autoRelease)&&n.destroy())},r&&"none"!==r){var u=r.split(":");n._anim=a.effect(o,u[0],u[1],t),n.emit("hide")}else n.emit("hide"),C(t);return n},destroy:function(){var e=this;return e.destroyed?e:(e.emit("beforeremove"),i.current===e&&(i.current=null),e._popup.off().remove(),e._mask.off().remove(),e._shadow.off().remove(),e.emit("destroy"),e.removeAllListeners(),w(e,function(t,n){delete e[n]}),e._={},e.destroyed=!0,e)},resize:function(){var e=this._;if(this.open&&this._ready&&!e.showing&&!this._freezing){var t=this.anchor;t?this.alignTo(t):this.center(),this.emit("resize")}return this},_freeze:function(e){return this._freezing=!!e,this},focus:function(e){var t=this._,n=this.node,r=this._popup,a=i.current,s=t.zIndex;if(a&&a!==this&&a.blur(!1),!o.contains(n,q())){var u=r.find("[autofocus]")[0];!t.focusing&&u?t.focusing=!0:u=n,this._focus(u)}return void 0===s&&(s=t.zIndex=i.zIndex++,r.css("zIndex",s),r.addClass(g+"-focus")),i.current=this,this.emit("focus"),this},blur:function(){var e=this._,t=arguments[0],n=this._activeElement;return n?(t!==!1&&this._focus(n),delete e.focusing,delete this._activeElement,this._popup.removeClass(g+"-focus"),this.emit("blur"),this):this},_focus:function(e){if(e&&this._.autofocus&&!/^iframe$/i.test(e.nodeName))try{e.focus()}catch(e){}},center:function(){var e=this._popup,t=this._.fixed,n=A(),i=P(),o=$(e),r=t?0:n.x,a=t?0:n.y,s=(i.w-o.w)/2+r,u=.382*(i.h-o.h)+a;return e.css({left:m(T(s),r),top:m(T(u),a)}),this},alignTo:function(e,t){var n=this,i=n._,r=n._popup,a=e.parentNode&&o(e);if(!a)return n;var s=a.offset();if(s.left*s.top<0)return n.center();t=t||i.align;var u=N(t),c=u.align,l=!u.auto;c&&c.length||(c=["b"]);var f=n._dirClass;f&&r.removeClass(f);var d=i.fixed,p=P(),h=A(),v=I(r),m=S(r),b=z(e),x=I(a),_=S(a),C=b.left,k=b.top,j=d?C-h.x:C,$=d?k-h.y:k,E=d?0:h.x,q=d?0:h.y,L=E+p.w-v,M=q+p.h-m,D={t:"b",b:"t",l:"r",r:"l"},O={t:"top",b:"top",l:"left",r:"left"},R={},W=[{t:$-m,b:$+_,l:j-v,r:j+x},{t:$,b:$-m+_,l:j,r:j-v+x}],U={l:j+y((x-v)/2),t:$+y((_-m)/2)},B={left:[E,L],top:[q,M]};l||w(c,function(e,t){W[t][e]>B[O[e]][1]&&(e=c[t]=D[e]),W[t][e]<B[O[e]][0]&&(c[t]=D[e])});var F=c[0];c[1]||(c[1]="left"===O[F]?"t":"l",W[1][c[1]]=U[c[1]]),W[0][F]=W[0][F]+10*("tl".indexOf(F)!==-1?-1:1),R[O[c[0]]]=T(W[0][c[0]]),R[O[c[1]]]=T(W[1][c[1]]);var H=g+"-"+F;r.css(R).addClass(H),n._dirClass=H;var Q=n.$("arrow",1),Y=n.$("inner",1);if(!Q){if(!Y)return n;Q=o('<div node-type="arrow" class="ui-arrow"><i></i><b></b></div>').appendTo(Y)}var G,V,X="top"!==O[F],J=["v","h"][1^X],Z=I(Q),K=S(Q),ee={},te=X?"left":"top";switch(J){case"h":G=y(C+(x-Z)/2),ee.left=G;break;case"v":V=y(k+(_-K)/2),ee.top=V}return Q.offset(ee).css(te,""),n}}),i.zIndex=1024,i.current=null,n.exports=i}),define("lib/ui/box/1.0.1/dialog",["require","exports","module","jquery","../../../core/1.0.0/utils/util","../../../core/1.0.0/dom/delegator","./popup"],function(e,t,n){"use strict";var i=e("jquery"),o=e("../../../core/1.0.0/utils/util"),r=e("../../../core/1.0.0/dom/delegator"),a=e("./popup"),s=o.extend,u=o.guid,c=o.each,l=window.document,f={zIndex:1024,title:"",close:!0,clickBlankToHide:!1,content:'<span class="ui-box-loading">Loading..</span>',className:"",width:"",height:"",button:null,buttonClass:"ui-box-btn",buttonClassLight:"autofocus",html:'<div node-type="inner" class="ui-box"><a node-type="close" action-type="close" class="ui-box-iconf ui-box-close">x</a><div node-type="header" class="ui-box-hd"><div node-type="title" class="ui-box-title"></div></div><div node-type="body" class="ui-box-bd"><div node-type="content" class="ui-box-content"></div></div><div node-type="footer" class="ui-box-ft"><div node-type="button" class="ui-box-func"></div></div></div>'},d={},p=function(e){var t=e||(e={}),n=e.id||e.id||u(),o=p.get(n)||this;"string"!=typeof e&&1!==e.nodeType||(e={content:e}),e=s({},f,e),e.original=t;var r,a=e.button||(e.button=[]);if(i.isArray(r=a)||(r=[],a&&"object"==typeof a&&c(a,function(e,t){e.id=t,r.push(e)}),a=e.button=r),a.length>0){var l=!1;c(a,function(t,n){var i=t.id||u();t.autofocus&&(l=!0),e[i]&&s(t,e[i]),t.index=n}),l||(a[a.length-1].autofocus=!0)}return o.emit("init",e),o.initialized?o.options(e).focus():o.init(e),d[n]=o,o};o.inherits(p,a,{init:function(e){var t=this;a.call(t,e);var n=function(e){var n=e.actionValue===!1||e.isDefaultPrevented();n||t.hide()};t._delegator=new r(t.node,{context:t,onDelegate:n}),t.delegate("close",function(e){t.hide()}).once("render",function(){t.initComponents()}).on("destroy",function(){delete d[e.id],t._delegator.destroy()})},options:function(e){var t=this,e=s(t._,e);return t._freeze(!0),c(["title","content","width","height","action","button"],function(n,i){i=e[n],null!=i&&"function"==typeof t[n]&&t[n](i)}),t._freeze(!1).resize(),e.zIndex&&(a.zIndex=e.zIndex),t},initComponents:function(){var e=this,t=e._;e.$("header").hide(),e.$("footer").hide(),e.options(),t.close||e.$("close").css("display","none"),t.clickBlankToHide&&i(e.mask).on("onmousedown"in l?"mousedown":"click",function(){return e.hide(),!1});var n=function(t){var n=t.target,i=n.nodeName,o=/^input|textarea$/i,r=a.current===e,s=t.keyCode;!r||o.test(i)&&"button"!==n.type||27===s&&e.hide()};i(l).on("keydown",n),e.on("destroy",function(){i(l).off("keydown",n)})},delegate:function(e,t,n){var i=this._delegator;return i.on.apply(i,arguments),this},undelegate:function(e,t,n){var i=this._delegator;return i.un.apply(i,arguments),this},content:function(e){var t=this.$("content");return e&&e.nodeType?(i.contains(l,e)&&this.on("beforeremove",function(){i("body").append(e.hide())}),e=i(e),t.empty().append(e.show())):t.html(e),this.resize()},title:function(e){return this.$("title").html(e),this.$("header")[e?"show":"hide"](),this},width:function(e){return""!==e&&(this.$("content").css("width",e),this.resize()),this},height:function(e){return""!==e&&(this.$("content").css("height",e),this.resize()),this},button:function(e){e=e||[];var t=this,n=t._,i="",o=0,r=n.buttonClass;return"string"==typeof e?(i=e,o++):c(e,function(e,a){var s=e.id,u=e.fn||e.callback,c=e.display!==!1,l=e.className||r,f=[l];e.autofocus&&f.push(n.buttonClassLight),"function"==typeof u&&t.delegate(s,u),c&&o++,i+='<button type="button" action-type="'+s+'"'+(c?"":' style="display:none"')+(' class="'+f.join(" ")+'"')+(e.disabled?" disabled":"")+">"+(e.text||e.value)+"</button>"}),t.$("button").html(i),t.$("footer")[o?"show":"hide"](),t.resize(),t},action:function(e){var t=this;return c(e,function(e,n){t.delegate(n,e)}),t}}),p.getCurrent=function(){return a.current},p.get=function(e){return void 0===e?d:d[e]},p.config=function(e){e&&s(f,e)},n.exports=p}),define("lib/ui/box/1.0.1/messagebox",["require","exports","module","jquery","../../../core/1.0.0/utils/util","./drag","./dialog"],function(e,t,n){"use strict";var i=e("jquery"),o=e("../../../core/1.0.0/utils/util"),r=e("./drag"),a=e("./dialog"),s=o.each,u=o.extend,c=window.clearTimeout,l="//s1.zhongzhihui.com/lib/assets/images/loading/loading32x32.gif";!function(){var e=i('<i class="ui-box-iconf" style="position:absolute;left:-999em;top:-999em;">x<img src="'+l+'"</i>').appendTo("body");setTimeout(function(){e.remove(),e=null},50)}();var f={info:"&#x69;",warn:"&#x21;",confirm:"&#x3f;",ok:"&#x2714;",error:"&#x2718;",loading:'<img src="'+l+'" />'},d=function(e){var t=f[e];return t?'<i node-type="icon" class="x-icon ui-box-iconf">'+t+"</i>":""},p=o.guid("__x")+"$",h=function(e){return p+e},g=function(e,t){var n,i=t.xtype,o=i&&d(i)||t.iconHTML;return o&&(n=e?'<div node-type="text" class="x-text">'+e+"</div>":"",e=['<div class="ui-box-x-wrap">',o,n,"</div>"].join("")),e},v=function(e){var t=e.contentWindow;if(t)try{return t.document}catch(e){return 0}},m=function(e){var t;e.once("init",function(n){var i={};s(["title","width","height","button"],function(e){i[e]=n[e],delete n[e]}),e.once("load",function(){var n=e._;s(i,function(i,o){if(i)if("title"===o){if("auto"===i)try{i=t.contentWindow.document.title||""}catch(e){i=""}i&&e.title(i)}else"function"==typeof e[o]?e[o](i):n[o]=i})})}).once("render",function(){var n=e._;setTimeout(function(){t=y(e,n.url),e.iframeNode=t},30);var o=n.original;if(!(o instanceof Object))for(var r=function(){e.hide().destroy()},a=0;a<frames.length;a++)try{if(o instanceof frames[a].Object){i(frames[a]).one("unload",r);break}}catch(e){}}).once("beforeremove",function(){i(t).attr("src","about:blank").remove()},!1)},y=function(e,t){var n=e._,o=e.$("content"),r=o.find("iframe"),a=r&&r[0],s=function(t){e._freeze(!0),t&&(n.width||e.width(t.width),n.height||e.height(t.height)),e.emit("load"),e._freeze(!1).resize(),s=null,r.removeAttr("style"),r=a=null},u=function(t){n.showing?e.once("shown",t):t()};if(!r.length){var c=/(msie) ([\w.]+)/.test(navigator.userAgent.toLowerCase()),l='<iframe id="{id}-iframe" name="{id}-iframe" class="iframe" frameborder="0" hspace="0"'+(c?' allowtransparency="true"':"")+' scrolling="'+n.scrolling+'" style="position:absolute;left:-9999em;top:-9999em;" src="'+t+'"></iframe>';r=i(l.replace(/{id}/g,n.id)).appendTo(o),a=r[0],n.autoSize?r.one("load",function(){var e,t,n,o=v(a),c=o&&i(o);c&&(e=c.width(),r.width(e),t=c.height(),n={width:e,height:t}),u(function(){s(n)})}):u(function(){s()})}return a},b=function(e){var t=this;e=u({},e);var n=e.button||(e.button=[]);s(["cancel","ok"],function(t,i){var o=e[t];o&&"object"==typeof o&&(o.id=t,n.push(o),delete e[t])});var o=e.xtype;if(o)e.id=e.id||h(o),e.content=g(e.content,e),"none"!==o&&(e.className=(e.className||"")+" ui-box-x-"+o);else{var c=e.url;if(c){var l=e.close!==!1;e=u({modal:!0,close:!1,autoRelease:!0,autoSize:!0,scrolling:"auto"},e);var f=i(g("Loading...",{xtype:"loading"})).addClass("ui-box-x-loading");e.content=f,e.className=(e.className||"")+" ui-box-iframe",t.once("load",function(){f.remove(),f=null,l&&t.$("close").show()}),t.on("hidden",function(){t.destroy()}),m(t)}}return t=a.call(t,e)||t,t._ready||t.once("render",function(){var n=t.$("title");if(n.length&&e.drag!==!1){n.css("cursor","move");r.create(t.node,null,{hook:n,onstart:function(){t.anchor||t.focus()}})}}),t},x="__showDelay",w="__hideTimer";o.inherits(b,a,{show:function(e,t){var n=this,i=n._,r=[].slice.call(arguments),t=u({},i,t),a=t.duration||0,s=t.delay||0,l=function(){o.each([x,w],function(e,t){t=i[e],delete i[e],t&&c(t)})},f=function(){a>0&&(i[w]=setTimeout(function(){l(),n.hide()},a),n.once("hide",l)),b.__super__.show.apply(n,r)};return l(),s>0?i[x]=setTimeout(f,s):f(),n},hide:function(){var e=this,t=e._;return t&&o.each([x,w],function(e,n){n=t[e],delete t[e],n&&c(n)}),b.__super__.hide.apply(e,arguments),e}}),b.config=a.config,b.get=function(e){if(e){var t,n,i=a.get();if(e&&(t=e.frameElement))for(var o in i)if(i.hasOwnProperty(o)&&(n=i[o],n.iframeNode===t))return n;return i[e]}},n.exports=b}),define("lib/ui/box/1.0.1/box",["require","exports","module","./messagebox","../../../core/1.0.0/utils/util"],function(e,t,n){"use strict";var i=e("./messagebox"),o=e("../../../core/1.0.0/utils/util"),r=function(){},a=o.mix,s=function(e,t){var n=function(e,t){return void 0!==t&&null!==t&&""!==t&&!("number"==typeof t&&isNaN(t))};return function(e,t){return a(e,t,!0,!0,n)}}(),u=function(e){return!!(e&&e.nodeType&&e.tagName)},c=o.guid,l=function(){return c("__0x$")},f=function(e){var t,n=e[1]||{};t=e[0],t&&("string"==typeof t?n.html=t:"object"==typeof t&&(n=t));var i=n.skin;return i&&(n.className=i,delete n.skin),n},d=function(e,t){var t=f([e,t]);return new i(t)},p=function(e,t,n){"object"==typeof e?(n=t,t=e,e=""):u(t)?(n=t,t={}):"number"==typeof t&&(t={duration:t}),t=t||{};var i=d(s({id:l(),content:e,className:"ui-bubble",autofocus:!1,autoRelease:!0,close:!1,xtype:"none",align:"top",duration:2e3,hideWithAni:"fadeOut",showWithAni:"fadeInUp"},t));return t.hide?i:i.show(n)},h={create:d,loadUrl:function(e,t){t=t||{},t.url=e;var n=d(t);return n.show()},loading:function(e,t){t=t||{};var n=d(s({autofocus:!0,autoRelease:!0,id:l(),modal:!0,close:!1,xtype:"loading",content:e||""},t));return t.hide?n:n.show()},alert:function(e,t){return"function"==typeof t&&(t={ok:{fn:t}}),t=s({title:"提示",xtype:"info",className:"ui-box-alert",autofocus:!0,id:l(),modal:!0,autoRelease:!0,content:"<div>"+e+"</div>",ok:{text:"确定",fn:function(){}}},t),d(t).show()},confirm:function(e,t,n,i){var o;!i&&n&&"object"==typeof n&&(u(n)?i=n:o=n,n=t),"function"!=typeof t&&(o=t,t=r),"function"!=typeof n&&(n=t);var a=function(e){e?t(e):n(e)};o&&(i=i||o.sender);var c=d(s({xtype:"confirm",autofocus:!0,id:l(),modal:!i,autoRelease:!0,content:"<div>"+e+"</div>",close:!1,ok:{text:"确定",fn:function(){a(!0)}},cancel:{text:"取消",fn:function(){a(!1)}}},o));return c.show(i)},bubble:p};h.tips=h.bubble,o.each(["ok","info","warn","error"],function(e,t){h[e]=function(t,n,i){var o={xtype:e};return n&&n.nodeType?(i=n,n=void 0):"number"==typeof n?o.duration=n:o=s(o,n),p(t,o,i)}}),h.get=i.get,h.config=i.config,n.exports=h}),function(e,t,n){"function"==typeof define&&define.amd?define("lib/plugins/lazyload/1.9.3/lazyload",["jquery"],n):e[t]=n(e.jQuery||e.Zepto)}(this,"Lazyload",function(e,t){"use strict";if(!e)throw"Error: jquery api not implements.";var n=e.each,i=function(e,t){if(e instanceof Array&&e.filter)return e.filter(t);for(var n=[],i=-1,o=e.length;++i<o;)t(e[i],i)&&n.push(e[i]);return n},o=function(e,t,n,i){var o;return function(){var r=i||this,a=arguments,s=function(){o=null,n||e.apply(r,a)},u=n&&!o;clearTimeout(o),o=setTimeout(s,t),u&&e.apply(r,a)}},r=function(t,n){t=t||{};var i=e(t),o=Array.prototype.slice;return n=n||t.name,e.each({on:"on",un:"off",once:"one",emit:"trigger"},function(e,r){t[e]=function(t){var a=o.call(arguments,0),s=a[1];return n&&!~t.indexOf(".")&&(a[0]=t+"."+n),"function"==typeof s&&("on"===e||"once"===e?a[1]=s.__||(s.__=function(e){return e.preventDefault(),s.apply(this,o.call(arguments,1))}):"un"===e&&(a[1]=s.__)),i[r].apply(i,a)}}),t},a=window,s=e(a),u=a.Image,c=/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion),l="__lazy_status__",f=0,d=1,p=2,h=function(e){return e[l]===t},g=function(){var e={},t=function(t,n){"function"==typeof n&&(e[t]=n)},n=function(t){return e[t]};return{define:t,get:n}}();g.define("image",function(n,i,o,r){if(!i)return void r("error");var a=new u,s=function(){a.onload=a.onerror=null,a=i=n=r=s=t};a.onload=function(){var t=e(n),a=o.effect;"function"!=typeof t[a]&&(a="show"),t.hide(),"IMG"===n.nodeName.toUpperCase()?t.attr("src",i):t.css("background-image",'url("'+i+'")'),t[a](o.effectSpeed),r(null,"load"),s()},a.onerror=function(e){r(e),s()},a.src=i}),g.define("html",function(e,t,n,i){i()});var v=function(t,u){u=u||{},t=e(t);var v=this,w={type:"image",threshold:50,failureLimit:0,event:"scroll",effect:"show",container:a,dataAttribute:"src",sourceMaker:null,skipInvisible:!0,appear:null,load:null,loadingClass:"",placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};r(v);var _=u.type||w.type,C=g.get(_);if("function"!=typeof C)throw"Error, cannot found the specific type loader (type: `"+_+"`)";"html"===_&&(w.placeholder=""),
u&&e.extend(w,u);var T=w.container,k=w.event,j=0===k.indexOf("scroll"),A=T&&T!==a?e(T):s,$=function(t){var i=v._list;if(i.length>0){var o=0;n(i.slice(0),function(t,n){var i=e(n);if(!w.skipInvisible||i.is(":visible"))if(b(n,w)||x(n,w));else if(m(n,w)||y(n,w)){if(++o>w.failureLimit)return!1}else i.trigger("appear"),o=0})}else v.reset()},P=function(){v._list=i(v._list,function(e){return!e[l]})},z=function(){var t=this,n=e(t),i=n.attr("data-"+w.dataAttribute),o=w.sourceMaker,r=w.appear,a=w.loadingClass,s=t[l];s===f?(t[l]=d,a&&n.addClass(a),o&&(i=o(i,t)),r&&r.apply(v,[t,i]),C.call(v,t,i,w,function(e,o){if(!v._destroyed){if(a&&n.removeClass(a),e)setTimeout(function(){t[l]=f,v.emit("lazyItemError",t,i,e),t=null},300);else{t[l]=p,P(),v.emit("lazyItemReady",t,i,o);var r=w.load;r&&r.apply(v,[t,i,o]),t=null}n=null}})):s===p&&(P(),v.emit("lazyItemReady",t,i))},E=function(){this[l]||e(this).trigger("appear")},I=function(t){var n=e(t);t[l]=f;var i=w.placeholder;if(i)if(n.is("img")){var o=n.attr("src");o||n.attr("src",i)}else"image"===v._.type||n.children()[0]||n.html(i);n.on("appear",z),j||n.on(k,E),v._list.push(t)},S=function(e){e=i(e||[],h),e.length&&(n(e,function(e,t){I(t)}),v._inited||q(v))},q=function(t){if(!t._inited){var i=o($,30);if(t._inited=!0,j&&A.on(k,i),s.on("resize",i),c){var r=function(i){i.originalEvent&&i.originalEvent.persisted&&n(t._list,function(t,n){e(n).trigger("appear")})};s.on("pageshow",r),t.once("reset",function(){s.off("pageshow",r)})}t.once("reset",function(){n(t._list,function(e,t){N(t)}),j&&A.off(k,i),s.off("resize",i)}),e(document).ready($)}},N=function(t){var n=e(t);n.off("appear",z),j||n.off(k,E)};v.on("lazyItemReady",function(e){N(e)}),v.once("destroy",function(){S=null,$=null,P=null,z=null,E=null}),v._=w,v._list=[],v.add=function(t){var n=e(t);n.length>0&&S(n)},v.update=$,S(t)};v.prototype={constructor:v,update:function(){},peek:function(){var e=this._list,n=e.length;return n>0?e[0]:t},reset:function(){return this._inited?(this._inited=!1,this.emit("reset"),this._list.length=0,this):this},destroy:function(){this._destroyed||(this._destroyed=!0,this.reset().emit("destroy"),this.un(),this._=null)}},v.define=function(e,t){return g.define(e,t)};var m=function(t,n){var i,o=n.container;return i=o&&o!==a?e(o).offset().top+e(o).height():(a.innerHeight?a.innerHeight:s.height())+s.scrollTop(),i<=e(t).offset().top-n.threshold},y=function(t,n){var i,o=n.container;return i=o&&o!==a?e(o).offset().left+e(o).width():s.width()+s.scrollLeft(),i<=e(t).offset().left-n.threshold},b=function(t,n){var i,o=n.container;return i=o&&o!==a?e(o).offset().top:s.scrollTop(),i>=e(t).offset().top+n.threshold+e(t).height()},x=function(t,n){var i,o=n.container;return i=o&&o!==a?e(o).offset().left:s.scrollLeft(),i>=e(t).offset().left+n.threshold+e(t).width()},w=function(e,t){return!(y(e,t)||x(e,t)||m(e,t)||b(e,t))};return v.belowthefold=m,v.rightoffold=y,v.abovethetop=b,v.leftofbegin=x,v.inviewport=w,v}),function(e,t){"function"==typeof define&&define.amd?define("lib/ui/pagination/1.0.1/pagination",["jquery"],t):e.returnExports=t(jQuery)}(this,function(e){"use strict";var t="pagination",n=function(n,i){var o=e(n);if(o.data(t))throw"Please destroy the old pagination instance first.";this.pager=o,this.init(i)};return n.prototype={constructor:n,init:function(n){var i=e.extend({totalCount:1,pageSize:1,pageCount:0,displayedPages:3,edges:2,currentPage:1,hrefTextPrefix:"#p-",hrefTextSuffix:"",prevText:"上一页",nextText:"下一页",ellipseText:"&hellip;",className:"",labelMap:[],displayInfo:!1,selectOnClick:!0,async:!1,onPage:function(e,t){},onInit:function(){}},n||{}),o=this,r=o.pager;e.each(i,function(e,t){var n=i[t];"function"==typeof n&&(i[t]=function(){return n.apply(o,arguments)})}),i.pageCount=i.pageCount?i.pageCount:Math.ceil(i.totalCount/i.pageSize)?Math.ceil(i.totalCount/i.pageSize):1,i.currentPage=i.currentPage-1,i.halfDisplayed=i.displayedPages/2,r.addClass([i.className,"ui-pager"].join(" ")).data(t,i),o._draw(),o._initEvents(),i.onInit()},_initEvents:function(){var n=this,i=n.pager,o=n.data(),r=function(){var e,t,n=i.find(".page-no");return!!n.length&&(e=n.val(),t=parseInt(e,10),!e||isNaN(t)?(n.val(o.currentPage+1),!1):t)},a=function(e){if(!o.disabled){var t=r();t>0&&t<=o.pageCount&&t-1!==o.currentPage&&n._selectPage(t-1,e)}};i.on("click",".page-link",function(t){t.preventDefault();var i=+e(this).data("page-index");isNaN(i)||n._selectPage(i,t)}),o.displayInfo&&i.on("click",".page-no",function(e){this.select()}).on("keydown",".page-no",function(e){13===e.keyCode&&a()}).on("click",".page-info .ui-button",function(e){e.preventDefault(),a()}),i.one("pagination.destroy",function(){i.undelegate(".page-link","click").undelegate(".page-no","click keydown").undelegate(".page-info .ui-button","click").removeData(t),o=null,i=null,n.pager=null})},data:function(e,n){var i=this.pager.data(t);return e?void 0===n?i[e]:i[e]=n:i},get:function(e){var t=e?this.data(e):null;return e&&"currentPage"===e?t+1:t},getCurrentPage:function(){return this.data().currentPage+1},selectPage:function(e){return this._selectPage(e-1)},prevPage:function(){var e=this.data();return e.currentPage>0&&this._selectPage(e.currentPage-1),this},nextPage:function(){var e=this.data();return e.currentPage<e.pageCount-1&&this._selectPage(e.currentPage+1),this},destroy:function(){this.pager.empty().trigger("pagination.destroy")},drawPage:function(e){var t=this.data();return t.currentPage=e-1,this._draw(),this},redraw:function(){this._draw()},disable:function(){var e=this.data();return e.disabled=!0,this._draw(),this},enable:function(){var e=this.data();return e.disabled=!1,this._draw(),this},show:function(){var e=this,t=e.pager;t.show()},hide:function(){var e=this,t=e.pager;t.hide()},setTotalCount:function(e,t){var n=this.data();n.totalCount=e,n.pageCount=this._getPages(n),t||this._draw()},setPageSize:function(e){var t=this.data();return t.pageSize=e,t.pageCount=this._getPages(t),this._selectPage(0),this},_wraper:function(t){var n=this.pager,i="UL"===n[0].tagName.toUpperCase()?n:n.find("ul");return!i.length&&t?e("<ul></ul>").appendTo(n):i},_draw:function(){var e,t=this.data(),n=this._getInterval(t),i=this.pager;i.empty();var o=this._wraper(!0);if(t.disabled&&o.addClass("disabled"),t.prevText&&this._appendItem(t.currentPage-1,{text:t.prevText,classes:"prev"}),n.start>0&&t.edges>0){var r=Math.min(t.edges,n.start);for(e=0;e<r;e++)this._appendItem(e);t.edges<n.start&&n.start-t.edges!=1?o.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):n.start-t.edges==1&&this._appendItem(t.edges)}for(e=n.start;e<n.end;e++)this._appendItem(e);if(n.end<t.pageCount&&t.edges>0){t.pageCount-t.edges>n.end&&t.pageCount-t.edges-n.end!=1?o.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):t.pageCount-t.edges-n.end==1&&this._appendItem(n.end++);var a=Math.max(t.pageCount-t.edges,n.end);for(e=a;e<t.pageCount;e++)this._appendItem(e)}t.nextText&&this._appendItem(t.currentPage+1,{text:t.nextText,classes:"next"}),t.displayInfo&&this._renderPI()},_getPages:function(e){var t=Math.ceil(e.totalCount/e.pageSize);return t||1},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pageCount-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pageCount):Math.min(e.displayedPages,e.pageCount))}},_appendItem:function(t,n){var i,o,r=this,a=(r.pager,r.data()),s=e("<li></li>"),u=r._wraper();t=t<0?0:t<a.pageCount?t:a.pageCount-1,i={text:t+1,classes:""},a.labelMap.length&&a.labelMap[t]&&(i.text=a.labelMap[t]),i=e.extend(i,n||{}),t===a.currentPage||a.disabled?(a.disabled?s.addClass("disabled"):s.addClass("active"),o=e('<span class="current">'+i.text+"</span>")):o=e('<a href="'+a.hrefTextPrefix+(t+1)+a.hrefTextSuffix+'" data-page-index="'+t+'" class="page-link">'+i.text+"</a>"),i.classes&&o.addClass(i.classes),s.append(o),u.append(s)},_selectPage:function(e,t){var n=this,i=n.data(),o=function(e,t){i.currentPage=e,i.selectOnClick&&n._draw(),i.onPage(e+1,t)};if("function"==typeof i.async){var r=i.async({pageSize:i.pageSize,currentPage:e+1});if(r&&r.then)return i.lock?n:(i.lock=1,r.then(function(i){var r=(i||0).totalCount;return void 0!==r&&n.setTotalCount(r,!0),o(e,t),n}).always(function(){i.lock=0,i=void 0,o=void 0}));throw"Error: Please make sure that the `async` returns is a Deferred's promise"}return o(e),n},_renderPI:function(){var t,n=this,i=(n.pager,n.data()),o=i.currentPage+1,r=i.pageCount,a=e('<li class="page-info"></li>'),s=n._wraper();o=o<1?1:Math.min(o,r),t="共"+i.pageCount+'页，跳转到第<input type="text" class="page-no" autocomplete="off" value="'+o+'">页<a class="ui-button" href="javascript:;">跳转</a>',i.disabled&&a.addClass("disabled"),a.html(t),s.append(a)}},n}),define("lib/core/1.0.0/io/request",["require","exports","module","jquery","../utils/util","../event/emitter"],function(e,t,n){"use strict";var i=e("jquery"),o=e("../utils/util"),r=e("../event/emitter"),a=o.setImmediate,s=o.noop,u=o.extend,c=i.trim,l=i.parseJSON,f=function(e,t,n){return function(i,o){try{return e.apply(t,arguments)}catch(e){n&&n(e,i,o)}}},d=function(e){return t.emit.apply(t,arguments)};r.applyTo(t);var p=function(){var e=5,t=0,n=[],o=function(){a(function(){--t,r()})},r=function(){if(n.length>0&&t<e){var r=n.shift(),a=r[0],s=r[1];++t,a.always(o),i.ajax(s)}};return function(e,t){n.push([e,t]),r()}}(),h=function(e){r.applyTo(this);var t={url:"",type:"GET",data:{},dataType:"json",timeout:3e4,cache:!1};e=u(t,e),delete e.error,delete e.success,this._opts=e};u(h.prototype,{send:function(){var e=this,t=this._opts,n=u({},t),i="jsonp"===n.dataType;return i&&(n.crossDomain=!0),n.complete=function(n,o){var r,a=+n.status,s=n.responseJSON,u={error:"1",msg:"Request error (status: "+(o||a)+")"},f=200===a||"success"===o;if(!i&&!s&&(s=c(n.responseText),s&&"<"!==s.charAt(0)))try{s=l(s)}catch(e){}f||(s=s||u),r={data:s,xhr:n,origin:t,status:a||o},f?e.emit("response",null,r):e.emit("error",s,r),e.emit("end",r),e.destroy()},p(e,n),e},always:function(e){return"function"==typeof e&&this.on("end",e),this},destroy:function(){this.un(),this._opts=null}}),t.on("request",function(e,t){if(t=t&&i(t)){var n="disabled";t.addClass(n).prop("disabled",!0),e.once("end",function(){t.removeClass(n).prop("disabled",!1),t=null})}}),t.ajax=function(e,t,n){"object"==typeof e&&(n=t,t=e,e=void 0),t=t||{},e&&(t.url=e);var o=new h(t),r=function(e,n){var i=e.stack&&e.stack.split("\n").slice(0,2).join("\n")||e,o={stack:i,origin:t,response:n};d("error",o,n),a(function(){console.log("%c "+i,"color:#ae0000")},1)},u=f(t.error||s,null,r),c=f(t.success||s,null,r);if(d("request",o,n)!==!1){if(n&&(n=i(n))){var l,p,g="data-async-lock";if(1===+n.attr(g))return;(p=n.attr("data-async-text"))&&(l=n.html(),n.html(p)),n.attr(g,1),o.once("response error",function(){n&&(n.attr(g,0),p&&n.html(l),n=null)})}return o.on("error",function(e,t){var n={code:e.error,message:e.msg,status:t.status,origin:t.origin,response:t.data};d("error",n,t)!==!1&&u(e)}),o.on("response",function(e,t){if(t=t.data,d("response",t)!==!1)return e?void u(e):void(t&&0===+(t.error||0)?c(t):u(t))}),o.send()}},i.each(["get","post","jsonp"],function(e,n){t[n]=function(e,i,o,r,a){"function"==typeof i&&(a=a||r,r=o,o=i,i=void 0),r&&"function"!=typeof r&&(a=r,r=void 0);var s={data:i,success:o,error:r||o};"string"==typeof e?s.url=e:u(s,e);var c=n;return"jsonp"===n&&(c="get",s.dataType="jsonp"),s.type=c,t.ajax(s,a)}})}),define("plugins/pager/1.0.0/pager",["require","exports","module","jquery","lib/ui/pagination/1.0.1/pagination","lib/core/1.0.0/io/request","lib/core/1.0.0/event/emitter","lib/core/1.0.0/utils/util"],function(e,t,n){"use strict";function i(e,t){var n=this;if(void 0===e)throw new Error("the param [el] is required.");n.el=e;var i={url:null,data:null,ajaxType:"get",alias:{currentPage:"pageNo",pageSize:"pageSize"},options:{totalCount:1,pageSize:20,currentPage:1,hrefTextPrefix:"#p-",hrefTextSuffix:"",prevText:"上一页",nextText:"下一页",ellipseText:"&hellip;",className:"",labelMap:[],displayInfo:!0,selectOnClick:!0,async:!1,onPage:function(e,t){},onInit:function(){}}};n.options=o.extend(!0,{},i,t),n._init()}var o=e("jquery"),r=e("lib/ui/pagination/1.0.1/pagination"),a=e("lib/core/1.0.0/io/request"),s=e("lib/core/1.0.0/event/emitter"),u=e("lib/core/1.0.0/utils/util");u.inherits(i,s),i.prototype._init=function(){var e=this,t=e.options;t.url&&(t.options.async=function(n){var i={};i[t.alias.currentPage]=n.currentPage,i[t.alias.pageSize]=n.pageSize,e.emit("ajaxStart");var r=o.Deferred();return a[t.ajaxType](t.url,o.extend({},i,t.data),function(t){e.emit("ajaxSuccess",t,function(t){t>1?(e.pagination.show(),e.pagination.setTotalCount(t)):(e.pagination.hide(),e.pagination.setTotalCount(1))}),r.resolve(t)},function(t){e.emit("ajaxError",t),r.reject(t)}),r.promise()}),t.options.onPage=function(t,n){e.emit("change",t,n)},e.el.hide(),e.pagination=new r(e.el,t.options),e.pagination.selectPage(t.options.currentPage),e.el.show()},i.prototype.destroy=function(){var e=this;e.pagination.destroy()},n.exports=i}),!function(){function e(e){return e.replace(b,"").replace(x,",").replace(w,"").replace(_,"").replace(C,"").split(T)}function t(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function n(n,i){function o(e){return d+=e.split(/\n/).length-1,l&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=y[1]+t(e)+y[2]+"\n"),e}function r(t){var n=d;if(c?t=c(t,i):a&&(t=t.replace(/\n/g,function(){return d++,"$line="+d+";"})),0===t.indexOf("=")){var o=f&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),o){var r=t.replace(/\s*\([^\)]+\)/,"");p[r]||/^(include|print)$/.test(r)||(t="$escape("+t+")")}else t="$string("+t+")";t=y[1]+t+y[2]}return a&&(t="$line="+n+";"+t),m(e(t),function(e){if(e&&!g[e]){var t;t="print"===e?x:"include"===e?w:p[e]?"$utils."+e:h[e]?"$helpers."+e:"$data."+e,_+=e+"="+t+",",g[e]=!0}}),t+"\n"}var a=i.debug,s=i.openTag,u=i.closeTag,c=i.parser,l=i.compress,f=i.escape,d=1,g={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},v="".trim,y=v?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],b=v?"$out+=text;return $out;":"$out.push(text);",x="function(){var text=''.concat.apply('',arguments);"+b+"}",w="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+b+"}",_="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(a?"$line=0,":""),C=y[0],T="return new String("+y[3]+");";m(n.split(s),function(e){e=e.split(u);var t=e[0],n=e[1];1===e.length?C+=o(t):(C+=r(t),n&&(C+=o(n)))});var k=_+C+T;a&&(k="try{"+k+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+t(n)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var j=new Function("$data","$filename",k);return j.prototype=p,j}catch(e){throw e.temp="function anonymous($data,$filename) {"+k+"}",e}}var i=function(e,t){return"string"==typeof t?v(t,{filename:e}):a(e,t)};i.version="3.0.0",i.config=function(e,t){o[e]=t};var o=i.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},r=i.cache={};i.render=function(e,t){return v(e,t)};var a=i.renderFile=function(e,t){var n=i.get(e)||g({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n};i.get=function(e){var t;if(r[e])t=r[e];else if("object"==typeof document){var n=document.getElementById(e);if(n){var i=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,"");t=v(i,{filename:e})}}return t};var s=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?s(e.call(e)):""),e},u={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},c=function(e){return u[e]},l=function(e){return s(e).replace(/&(?![\w#]+;)|[<>"']/g,c)},f=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},d=function(e,t){var n,i;if(f(e))for(n=0,i=e.length;i>n;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},p=i.utils={$helpers:{},$include:a,$string:s,$escape:l,$each:d};i.helper=function(e,t){h[e]=t};var h=i.helpers=p.$helpers;i.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="<"+n+">\n"+e[n]+"\n\n";"object"==typeof console&&console.error(t)};var g=function(e){return i.onerror(e),function(){return"{Template Error}"}},v=i.compile=function(e,t){function i(n){try{return new u(n,s)+""}catch(i){return t.debug?g(i)():(t.debug=!0,v(e,t)(n))}}t=t||{};for(var a in o)void 0===t[a]&&(t[a]=o[a]);var s=t.filename;try{var u=n(e,t)}catch(e){return e.filename=s||"anonymous",e.name="Syntax Error",g(e)}return i.prototype=u.prototype,i.toString=function(){return u.toString()},s&&t.cache&&(r[s]=i),i},m=p.$each,y="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",b=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,x=/[^\w$]+/g,w=new RegExp(["\\b"+y.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),_=/^\d[^,]*|,\d[^,]*/g,C=/^,+|,+$/g,T=/^$|,+/;o.openTag="{{",o.closeTag="}}";var k=function(e,t){var n=t.split(":"),i=n.shift(),o=n.join(":")||"";return o&&(o=", "+o),"$helpers."+i+"("+e+o+")"};o.parser=function(e){e=e.replace(/^\s/,"");var t=e.split(" "),n=t.shift(),o=t.join(" ");switch(n){case"if":e="if("+o+"){";break;case"else":t="if"===t.shift()?" if("+t.join(" ")+")":"",e="}else"+t+"{";break;case"/if":e="}";break;case"each":var r=t[0]||"$data",a=t[1]||"as",s=t[2]||"$value",u=t[3]||"$index",c=s+","+u;"as"!==a&&(r="[]"),e="$each("+r+",function("+c+"){";break;case"/each":e="});";break;case"echo":e="print("+o+");";break;case"print":case"include":e=n+"("+t.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(o)){var l=!0;0===e.indexOf("#")&&(e=e.substr(1),l=!1);for(var f=0,d=e.split("|"),p=d.length,h=d[f++];p>f;f++)h=k(h,d[f]);e=(l?"=":"=#")+h}else e=i.helpers[n]?"=#"+n+"("+t.join(",")+");":"="+e}return e},"function"==typeof define?define("template",[],function(){return i}):"undefined"!=typeof exports?module.exports=i:this.template=i}(),define("conf/uc/questions-answers",["require","exports","module","jquery","lib/ui/box/1.0.1/box","lib/plugins/lazyload/1.9.3/lazyload","plugins/pager/1.0.0/pager","lib/core/1.0.0/io/request","template"],function(e,t,n){"use strict";function i(e,t,n,i,o){"undefined"!=typeof s&&s.destroy(),s=new f(o,{url:e,data:t});var r=null;s.on("ajaxStart",function(){r=c.loading("正在加载...",{modal:!1})}),s.on("ajaxSuccess",function(e,t){if(!u.isEmptyObject(e.data)&&e.data&&e.data.resultList&&e.data.resultList.length>0){var s=p(n,e.data);document.getElementById(i).innerHTML=s,a=new l(u("#"+i).find(".jImg"),{mouseWheel:!0,effect:"fadeIn",snap:!0}),t&&t(e.data.records)}else{var s=p("tEmpty",1);document.getElementById(i).innerHTML=s,o.hide()}r&&r.hide()}),s.on("ajaxError",function(e){document.getElementById(i).innerHTML="<div style='color: #000;'>请求超时请重试！<a href=''>刷新</a></div>",r&&r.hide()}),s.on("change",function(e,t){})}function o(){var e=h.attr("data-id");i($PAGE_DATA.getPager,{type:e},"jPage","jContainer",g)}function r(e,t,n){d.get(e,t,function(e){e?0==e.code?(c.ok(n+"成功"),s.pagination.selectPage(s.pagination.get("currentPage"))):c.error(e.msg||n+"失败"):c.error(n+"失败，请重试")},function(e){c.error(e.msg||"网络错误,请重试")})}var a,s,u=e("jquery"),c=e("lib/ui/box/1.0.1/box"),l=e("lib/plugins/lazyload/1.9.3/lazyload"),f=e("plugins/pager/1.0.0/pager"),d=e("lib/core/1.0.0/io/request"),p=e("template"),h=(u("#jMain"),u("#jContainer")),g=u("#jPagination");a=new l(u(".jImg"),{mouseWheel:!0,effect:"fadeIn",snap:!0}),o();var v=u("#jMain"),m=u(".jPublish"),y=u(".jArrow"),b=u(".jTxtNum"),x=u(".jTxt");v.on("keyup",".jTxt",function(){var e=x.val().length;e>300?(u(this).addClass("text-error"),m.addClass("publish-error"),y.addClass("arrow-error"),b.css({color:"red"})):(u(this).removeClass("text-error"),m.removeClass("publish-error"),y.removeClass("arrow-error"),b.css({color:"#666"})),b.children("i").text(e)}),v.on("click",".jPublish",function(){var e=x.val();""==e?c.error("请输入发表内容"):u(this).hasClass("publish-error")||d.get($PAGE_DATA.baseStaticUrl+"source/api/course/details.json",{content:e},function(e){e?0==e.code?(c.ok("发表成功"),x.val(""),s.pagination.selectPage(s.pagination.get("currentPage"))):c.error(e.msg||"发表失败"):c.error("发表失败，请重试")},function(e){c.error(e.msg||"网络错误,请重试")})}),v.on("focus",".jTxt",function(){u(".jArrow").addClass("arrow-focus"),u(this).addClass("text-focus").attr("placeholder",""),u(this).css("color","#333")}).on("blur",".jTxt",function(){""===u(this).val()&&(u(this).removeClass("text-focus").attr("placeholder","看点糟点，不吐不快！别憋着，马上大声说出来吧！"),u(".jArrow").removeClass("arrow-focus"),u(this).css("color","#ccc"))}),v.on("click","#jLike",function(){var e,t=u(this).attr("data-id");u(this).hasClass("activeLike")?(e={dataType:1,type:1,id:t},r($PAGE_DATA.baseStaticUrl+"source/api/course/details.json",e,"取消点赞"),u(this).removeClass("activeLike")):(e={dataType:1,type:2,id:t},r($PAGE_DATA.baseStaticUrl+"source/api/course/details.json",e,"点赞"),u(this).addClass("activeLike"))})});