/*! Based on work by Simon Willison: http://gist.github.com/292562 */

/*! Weakdata - https://gist.github.com/b84827b7af6da78acb67ca75839cf1c6 by @allex | MIT License */

/*!
 * jQuery Validation Plugin v1.15.1
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2016 Jörn Zaefferer
 * Released under the MIT license
 */

// Copyright (c) 2010-2013 Diego Perini, MIT licensed

define("lib/core/1.0.0/utils/util",["require","exports","module"],function(t,e,n){"use strict";function i(t){return"object"==typeof t&&null!==t}function r(){}function o(t,e){for(var n=t.length,i=-1;++i<n;)e(t[i],i)}function s(t,e){for(var n in t)h.call(t,n)&&e(t[n],n,t)}function a(t,e){return t&&t.forEach?t.forEach(e):void(m(t)?o(t,e):s(t,e))}function u(t,e){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function l(t,e){var n=[];return a(t,function(t,i,r){n.push(e(t,i,r))}),n}function c(t,e){if(!e||!i(e))return t;for(var n=v(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function d(t){"?"===t.charAt(0)&&(t=t.substr(1));for(var e,n={},i=t.split("&"),r=-1,o=i.length;++r<o;)e=i[r].split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return n}var f=new Function("return this")(),h=Object.prototype.hasOwnProperty,m=Array.isArray||function(t){return t&&t instanceof Array},p=function(){var t=(+new Date).toString(36),e=-1;return function(n){return(n||"")+t+ ++e}}(),v=Object.keys||function(t){var e=[];return s(t,function(t,n){e.push(n)}),e},g="function"==typeof Object.create?function(t,e){t.__super__=e.prototype,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(){function t(t){this.constructor=t}return function(e,n){e.__super__=n.prototype,t.prototype=n.prototype,e.prototype=new t(e)}}(),y=f.console||(f.console={});o(["log","error","trace","warn","info"],function(t){y[t]||(y[t]=r)}),e.extend=function(t,e){for(var n=[].slice.call(arguments,1),i=n.length,r=-1;++r<i;)c(t,n[r]);return t},e.inherits=function(t,e,n){g(t,e),n&&c(t.prototype,n)},e.impls=function(t,n){return n="function"==typeof n?n.prototype:n,e.mix(t.prototype,n),t},e.parseQuery=d,e.parseParams=d,e.each=a,e.map=function(t,e){var n=m(t)?u:l;return n(t,e)},e.filter=function(t,e){var n,i,r=m(t)?(n=o,i=function(t,e){r.push(e)},[]):(n=s,i=function(t,e){r[t]=e},{});return n(t,function(t,n){e(t,n)&&i(n,t)}),r},e.mix=function t(e,n,i,r,o){for(var s in n)n.hasOwnProperty(s)&&(n[s]&&e[s]&&i&&"object"==typeof n[s]?t(e[s],n[s],i,r,o):(void 0===e[s]||r)&&(o&&!o(e[s],n[s])||(e[s]=n[s])));return e},e.guid=p,e.setImmediate=function(){var t=f.document,e=f.postMessage,n=f.setImmediate;return n?n:"onreadystatechange"in t.createElement("script")?function(e){function n(){i.onreadystatechange=null,i.parentNode.removeChild(i),e()}var i=t.createElement("script");i.onreadystatechange=n,t.documentElement.appendChild(i)}:e?function(t){function n(e){e.data===i&&(f.removeEventListener("message",n,!0),t())}var i=p();f.addEventListener("message",n,!0),e(i,"*")}:function(t){f.setTimeout(t,0)}}(),e.noop=r,e.throttle=function(t,e){if(e=e?e:150,e===-1)return function(){t.apply(this,arguments)};var n;return function(){var i=+new Date;(!n||i-n>e)&&(n=i,t.apply(this,arguments))}},e.debounce=function(t,e,n,i){var r;return function(){var o=i||this,s=arguments,a=function(){r=null,n||t.apply(o,s)},u=n&&!r;clearTimeout(r),r=setTimeout(a,e),u&&t.apply(o,s)}},e.deprecate=function(t,e){function n(){return i||(i=!0),t.apply(this,arguments)}if(f.noDeprecation===!0)return t;var i=!1;return n}}),define("lib/ui/box/1.0.1/drag",["require","jquery"],function(t){"use strict";var e=t("jquery"),n=e(window),i=e(document),r="createTouch"in document,o=document.documentElement,s=!("minWidth"in o.style),a=!s&&"onlosecapture"in o,u="setCapture"in o,l=e.noop,c={start:r?"touchstart":"mousedown",over:r?"touchmove":"mousemove",end:r?"touchend":"mouseup"},d=r?function(t){return t.touches||(t=t.originalEvent.touches.item(0)),t}:function(t){return t},f=function(){this.start=e.proxy(this.start,this),this.over=e.proxy(this.over,this),this.end=e.proxy(this.end,this),this.onstart=this.onover=this.onend=l};return f.types=c,f.prototype={start:function(t){return t=this.startFix(t),i.on(c.over,this.over).on(c.end,this.end),this.onstart(t),!1},over:function(t){return t=this.overFix(t),this.onover(t),!1},end:function(t){return t=this.endFix(t),i.off(c.over,this.over).off(c.end,this.end),this.onend(t),!1},startFix:function(t){return t=d(t),this.target=e(t.target),this.selectstart=function(){return!1},i.on("selectstart",this.selectstart).on("dblclick",this.end),a?this.target.on("losecapture",this.end):n.on("blur",this.end),u&&this.target[0].setCapture(),t},overFix:function(t){return t=d(t)},endFix:function(t){return t=d(t),i.off("selectstart",this.selectstart).off("dblclick",this.end),a?this.target.off("losecapture",this.end):n.off("blur",this.end),u&&this.target[0].releaseCapture(),t}},f.create=function(t,r,o){o=e.extend({hook:null,onstart:l,onover:l,onend:l},o);var s,a,u,c,d=e(t),h=o.hook?e(o.hook):d,m=new f,p=f.types.start,v=t.className.replace(/^\s|\s.*/g,"")+"-drag-start",g={off:function(){h.off(p,m.start)}};return m.onstart=function(e){var r="fixed"===d.css("position"),l=i.scrollLeft(),f=i.scrollTop(),h=d.width(),m=d.height();s=0,a=0,u=r?n.width()-h+s:i.width()-h,c=r?n.height()-m+a:i.height()-m;var p=d.offset(),g=this.startLeft=r?p.left-l:p.left,y=this.startTop=r?p.top-f:p.top;this.clientX=e.clientX,this.clientY=e.clientY,d.addClass(v),o.onstart.call(t,e,g,y)},m.onover=function(e){var n=e.clientX-this.clientX+this.startLeft,i=e.clientY-this.clientY+this.startTop,r=d[0].style;n=Math.max(s,Math.min(u,n)),i=Math.max(a,Math.min(c,i)),r.left=n+"px",r.top=i+"px",o.onover.call(t,e,n,i)},m.onend=function(e){var n=d.position(),i=n.left,r=n.top;d.removeClass(v),o.onend.call(t,e,i,r)},m.off=function(){h.off(p,m.start)},r?m.start(r):h.on(p,m.start),g},f}),function(t,e){if("function"==typeof define&&define.amd)define("lib/core/1.0.0/event/emitter",e);else if("undefined"!=typeof module)e(require,module.exports,module);else{var n={exports:{}};e(null,n.exports,n),t.EventEmitter=n.exports}}(this,function(t,e,n){"use strict";function i(){}function r(t,e,n,i){var r=!0;if(e)for(var o,s,a,u=-1,l={type:t,timeStamp:c()};o=e[++u];){s=o[p],a=o[v]||i;try{r=o[g]===m?s.call(a,l,n)!==!1&&r:s.apply(a,n)!==!1&&r}catch(t){setTimeout(function(){console.error(t)},1)}}return r}function o(t){var e,n=f(this);return n?(e=n[t],e.length):0}function s(t){return"[object Function]"===Object.prototype.toString.call(t)}function a(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function u(t,e){t.forEach?t.forEach(e):function(t){for(var n=-1,i=t.length;++n<i;)e(t[n],n)}(t)}var l=/\s+/,c=Date.now||function(){return+new Date},d=function(){return c()*Math.random()&65535}(),f=function(){var t,e,n;return"function"==typeof WeakMap&&(WeakMap.prototype||0).set?(t=new WeakMap,function(e,n){var i=t.get(e);return null===n?void 0!==i&&t.delete(e):!i&&n?(t.set(e,i={}),i):i}):(e=c(),n="__$widΦ"+e.toString(36),t={},function(i,r){if(!i||"object"!=typeof i)throw TypeError("Invalid value used as weak map key");var o;return null===r?i[n]&&(delete t[i[n]],delete i[n]):(o=i[n]||r&&(o=++e,t[o]={},i[n]=o),o&&t[o])})}(),h=1,m=2,p=0,v=1,g=2,y=function(t,e,n){var i=[];return i[p]=t,i[v]=e,i[g]=n,i},b=i.prototype;b.addListener=function(t,e,n,i){var r,o,s,a=h;if(e&&"object"==typeof e&&(n=e,e=n.handleEvent,a=m),!e)return this;for(r=f(this,1),t=t.split(l);o=t.shift();)s=!i&&r[o]||(r[o]=[]),s.push(y(e,n,a));return this},b.on=b.addListener,b.once=function(t,e,n){var i=!1,r=function(){this.removeListener(t,r),i||(i=!0,e.apply(n||this,arguments))};return r.guid=e.guid||(e.guid=d++),this.on(t,r)},b.removeListener=function(t,e,n){var i,r,o,s,u,c;if(e&&"object"==typeof e&&(n=e,e=n.handleEvent),!(i=f(this)))return this;if(!(t||e||n))return a(i,function(t,e){delete i[e]}),f(this,null),this;for(t=t?t.split(l):x(i);r=t.shift();)if(o=i[r])if(e||n)for(s=o.length;--s>=0;)u=o[s],c=u[p],e&&c!==e&&(void 0===c.guid||c.guid!==e.guid)||n&&u[v]!==n||o.splice(s,1);else delete i[r];return this},b.un=b.removeListener,b.removeAllListeners=function(t){return this.removeListener(t)},b.emit=function(t){var e,n,i,o,s,a,u=[],c=!0;if(!(e=f(this)))return this;for(t=t.split(l),s=1,a=arguments.length;s<a;s++)u[s-1]=arguments[s];for(;n=t.shift();)(i=e.all)&&(i=i.slice()),(o=e[n])&&(o=o.slice()),"all"!==n&&(c=r(n,o,u,this)&&c),c=r(n,i,[n].concat(u),this)&&c;return c},i.applyTo=function(t){function e(e,i){t[e]=function(){var r=n[e].apply(i||t,Array.prototype.slice.call(arguments));return r===i?this:r}}var n=b,i=x(n);s(t)?u(i,function(e){t.prototype[e]=n[e]}):u(i,function(t){e(t)})},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):o.call(t,e)},b.listenerCount=o;var x=Object.keys||function(t){var e=[];return a(t,function(t,n){e.push(n)}),e};n.exports=i}),define("lib/core/1.0.0/dom/delegator",["require","exports","module","jquery","../event/emitter"],function(t,e,n){"use strict";function i(t,e){var n,i,o,s=e.currentTarget,a=r(s),u=(e.handleObj||0).origType||e.type;if(!e.isPropagationStopped())return!a.attr("disabled")&&(n=a.attr("action-type"))&&(i=a.attr("action-data"),e.action=n,e.data=i,o=t.e.emit(u+l+n,e,s),e.actionValue=o,o===!1&&(e.preventDefault(),e.stopPropagation())),t.opts.onDelegate(e),o}var r=t("jquery"),o=t("../event/emitter"),s=/\S+/g,a=-1,u=(+new Date).toString(36),l="/",c=function(){return u+ ++a},d=function(t,e){var n=t.guid||(t.guid=c()),i=function(n,i){return t.call(e||i,n)};return i.guid=n,i},f=function(){},h=function(t,e){return"function"==typeof t?t:e},m=function(t,e){e=e||{},"string"==typeof t&&(t=r(t)[0]);var n={},a={},u=new o,c=e.context,m={o:n,opts:e,e:u},p=function(t){return i(m,t)};return e.onDelegate=h(e.onDelegate,f),n.on=function(e,n,i){if("function"==typeof n&&(i=n,n=e,e="click"),"function"!=typeof i)throw Error("The delegate handler should be a valid function");n=(n||"").match(s)||[];for(var o=n.length;o--;)a[e]||(a[e]=1,r(t).on(e,"[action-type]",p)),u.on(e+l+n[o],d(i,c));return this},n.un=function(e,n,i){"function"!=typeof n&&n||(i=n,n=e,e="click"),n=(n||"").match(s)||[];var o,a=n.length;for(r(t);a--;)o=e+l+n[a],u.un(o,i);return this},n.fire=function(e,n){n||(n=e,e="click");var i=r('[action-type="'+n+'"]',t)[0]||document,o=new r.Event(e);o.currentTarget=o.target=i,u.emit(e+l+n,o,i)},n.destroy=function(){var i=r(t);r.each(a,function(t,e){delete a[t],i.off(t,"[action-type]",p)}),u.un();for(var o in n)delete n[o];u=void 0,e=void 0,a=i=t=void 0,p=null},n};n.exports=m}),define("lib/core/1.0.0/utils/css",["require","exports","module","jquery","./util"],function(t,e,n){"use strict";function i(t){return l("<"+t+"/>")[0]}function r(t,e,n){t.insertRule?t.insertRule(e+" {"+n+"}",0):t.addRule(e,n,1)}function o(){var t,e,n,i,r,s="";for(t=document.body||document.documentElement,n=t.style,i="Transition",r=["Moz","Webkit","Khtml","O","ms"],e=0;e<r.length;){if(void 0!==n[r[e]+i]){s=r[e];break}e++}return o=function(){return s},s}function s(){var t=o();return t?"-v-".replace("v",t.toLowerCase()):""}function a(t){return"number"==typeof t?t:{fast:200,normal:500,slow:1e3}[t]||500}function u(t,e,n,i,r){var o,s,u=l(t),c=arguments,r="boolean"==typeof c[c.length-1]&&c[c.length-1],m=!1,p=function(){v()},v=function(t){m||g(!0)},g=function(t){m||(m=!0,v=d,u.off(y,p),o&&(clearTimeout(o),o=null),u.removeClass(s),t&&i(),u=null)};return"function"==typeof n&&(i=n,n=void 0),i=i||d,h?(n=n||"normal",e=e||"shake",s=["ui-animated","ui-speed-"+n,"ui-ani-"+e].join(" "),u.on(y,p),o=setTimeout(p,a(n)+100),r===!0?f(function(){u.addClass(s)}):u.addClass(s)):f(function(){i&&i()}),{stop:function(){return g.apply(null,arguments),this}}}var l=t("jquery"),c=t("./util"),d=(c.each,c.noop),f=c.setImmediate,h=s(),m=/\-v\-/g,p=document.getElementsByTagName("head")[0].appendChild(i("style")),v=p.sheet||p.styleSheet,g={".ui-animated":"-v-animation-fill-mode: both;",".ui-animated.ui-speed-normal":"-v-animation-duration: 0.5s;",".ui-animated.ui-speed-fast":"-v-animation-duration: 0.2s;",".ui-animated.ui-speed-slow":"-v-animation-duration: 1s;"},y={"-webkit-":"webkitAnimationEnd","-moz-":"animationend","-o-":"OAnimationEnd","-ms-":"msAnimationEnd","":"animationend"}[h];c.each(g,function(t,e){t&&r(v,e,t.replace(m,h))}),e.effect=u,e.getVendorPrefix=o}),define("lib/ui/box/1.0.1/popup",["require","exports","module","jquery","../../../core/1.0.0/utils/util","../../../core/1.0.0/utils/css","../../../core/1.0.0/event/emitter"],function(t,e,n){"use strict";function i(t){var e=this,n={autofocus:!0,fixed:!1,align:"bl",className:"",clickBlankToHide:!1,appendTo:"body",autoRelease:!1,html:"",modal:!1,showWithAni:"bounceIn:fast",hideWithAni:"bounceOut:fast"};e._=t=x(n,t),t.fixed=!!t.fixed&&z();var o=r('<div class="'+p+'" id="'+(t.id||b())+'" />').css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(t.html),s=r("<div />");if(e._popup=o,e._mask=e._shadow=s,e.node=o[0],e.mask=s[0],e.on("render",function(t){var n,r=t.className,s=e._mask,a=t.zIndex;o.html()||o.html(t.html),r&&o.addClass(r),o.css("position",t.fixed?"fixed":"absolute"),a&&o.css("zIndex",a),t.modal&&(o.addClass(p+"-modal"),n={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:a||i.zIndex,backgroundColor:"#000",opacity:.3},z()||x(n,{position:"absolute",width:c.width()+"px",height:d.height()+"px"}),s.attr("tabIndex",0).on("focus",C(e.focus,e)),e._shadow=s.clone(!0),s.css(n).addClass(p+"-mask"))}),e.on("beforeShow",function(t){var n=e.anchor,i=e._dirClass;!n&&i&&(o.removeClass(i),delete e._dirClass)}),e.on("show",function(t){e.resize(),t.modal&&(e._mask.insertBefore(o).css("display","block"),e._shadow.insertAfter(o)),t.autofocus&&e.focus()}),e.on("hide",function(t){e._mask.remove(),e._shadow.remove(),e.blur()}),e.once("destroy",function(){o.off(),o=null,e._mask.off(),e._shadow.off()}),!m){var a=C(e.resize,e);e.on("render",function(){c.on("resize",a)}),e.on("destroy",function(){c.off("resize",a)})}e.destroyed=!1,e.initialized=!0}var r=t("jquery"),o=t("../../../core/1.0.0/utils/util"),s=t("../../../core/1.0.0/utils/css"),a=t("../../../core/1.0.0/event/emitter"),u=window,l=u.document,c=r(u),d=r(l),f=l.documentElement,h=/\S+/g,m=!("minWidth"in f.style),p="ui-layer",v=u.Math,g=v.max,y=v.ceil,b=o.guid,x=o.extend,w=o.each,C=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},_=o.setImmediate,A=function(t){return u.parseInt(t,10)||0},k=function(t){return t&&1===t.nodeType},z=function(){return z._||(z._=function(){var t=l.createElement("div"),e=t.cloneNode(!1),n=!1,i=l.body||function(){return n=!0,f.appendChild(l.createElement("body"))}();t.style.cssText="position:fixed;top:42px",i.appendChild(t),i.appendChild(e);var r=t.offsetTop!==e.offsetTop;return i.removeChild(t),i.removeChild(e),n&&f.removeChild(i),t=e=null,r}())},T=function(){return{x:d.scrollLeft(),y:d.scrollTop()}},q=function(t){return{w:t.width(),h:t.height()}},E=function(){return q(c)},j=function(t){var e=k(t),n=e?r(t).offset():{left:t.pageX,top:t.pageY};t=e?t:t.target;var i=t.ownerDocument;if(i===u.document)return n;var o=i.defaultView||i.parentWindow,s=o.frameElement,a=T(),l=r(s).offset();return{left:n.left+l.left-a.x,top:n.top+l.top-a.y}},L=function(t,e){if(t.length){var n=A(t.css(e))||t[0]["offset"+e.charAt(0).toUpperCase()+e.slice(1)],i={width:["left","right"],height:["top","bottom"]};return w(i[e],function(e,i){n+=A(t.css("margin-"+e),10)||0}),n}return 0},N=function(t){return L(t,"width")},R=function(t){return L(t,"height")},S=function(){try{var t=l.activeElement,e=t.contentDocument;return e&&e.activeElement||t}catch(t){}},F=function(t){t=t||"";var e={auto:!0},n=t.slice(-1);"!"===n&&(e.auto=!1,t=t.slice(0,-1));for(var i,t=t.length<=2?t.split(""):t.replace(/^\s+|\s+$/g,"").split(" ").slice(0,2),r={},o={t:"t",b:"t",l:"l",r:"l"},s=-1,a=t.length;++s<a;)i=t[s].charAt(0),!i||r[o[i]]?t.splice(s,1):(t[s]=i,r[o[i]]=1);return 2===t.length&&t[0]===t[1]&&t.pop(),e.align=t,e};o.inherits(i,a,{open:!1,destroyed:!0,node:null,mask:null,emit:function(t){for(var e=(t||"").match(h)||[],n=e.length;n--;){var r=this["on"+e[n]],o=Array.prototype.slice.call(arguments,1);"function"==typeof r&&r.apply(this,o)}i.__super__.emit.apply(this,arguments)},$:function(t,e){var n=this._nodes||(this._nodes={}),i=n[t];return(!i||e&&0===i.length)&&(i=this._popup.find('[node-type="'+t+'"]'),e&&i.length>0&&(n[t]=i)),!e||i.length?i:null},show:function(t,e){var n,i=this,r=i._,o=t,a=null,u=i._anim;if(u&&u.stop(!0),i.destroyed||r.showing||i.open)return i;e=x({},i._,e),void 0!==o&&(n=typeof o,"boolean"===n?e.modal=o:o&&"object"===n&&(k(o)||k(o.target)?a=o:x(e,o)));var l=i._popup,c=e.showWithAni,d=function(){delete r.showing,i.emit("shown")};if(i._ready||(i.emit("render",e),i._ready=!0),i.open=!0,i.anchor=a,i._activeElement=S(),i.emit("beforeShow",e),l.appendTo(e.appendTo).css("display","block"),i.emit("show",e),r.showing=!0,c&&"none"!==c){var f=c.split(":");i._anim=s.effect(i.node,f[0],f[1],d)}else d();return i},hide:function(t){var e,n=this,i=n._,r=n.node,o=i.hideWithAni,a=n._anim;if(a&&a.stop(!0),n.destroyed||i.hidding||!n.open)return n;if(n.emit("beforeHide"),i.hidding=!0,e=function(){i.hidding===!0&&(r.parentNode.removeChild(r),n._popup.hide(),delete i.hidding,n.open=!1,n.emit("hidden"),(t||i.autoRelease)&&n.destroy())},o&&"none"!==o){var u=o.split(":");n._anim=s.effect(r,u[0],u[1],e),n.emit("hide")}else n.emit("hide"),_(e);return n},destroy:function(){var t=this;return t.destroyed?t:(t.emit("beforeremove"),i.current===t&&(i.current=null),t._popup.off().remove(),t._mask.off().remove(),t._shadow.off().remove(),t.emit("destroy"),t.removeAllListeners(),w(t,function(e,n){delete t[n]}),t._={},t.destroyed=!0,t)},resize:function(){var t=this._;if(this.open&&this._ready&&!t.showing&&!this._freezing){var e=this.anchor;e?this.alignTo(e):this.center(),this.emit("resize")}return this},_freeze:function(t){return this._freezing=!!t,this},focus:function(t){var e=this._,n=this.node,o=this._popup,s=i.current,a=e.zIndex;if(s&&s!==this&&s.blur(!1),!r.contains(n,S())){var u=o.find("[autofocus]")[0];!e.focusing&&u?e.focusing=!0:u=n,this._focus(u)}return void 0===a&&(a=e.zIndex=i.zIndex++,o.css("zIndex",a),o.addClass(p+"-focus")),i.current=this,this.emit("focus"),this},blur:function(){var t=this._,e=arguments[0],n=this._activeElement;return n?(e!==!1&&this._focus(n),delete t.focusing,delete this._activeElement,this._popup.removeClass(p+"-focus"),this.emit("blur"),this):this},_focus:function(t){if(t&&this._.autofocus&&!/^iframe$/i.test(t.nodeName))try{t.focus()}catch(t){}},center:function(){var t=this._popup,e=this._.fixed,n=T(),i=E(),r=q(t),o=e?0:n.x,s=e?0:n.y,a=(i.w-r.w)/2+o,u=.382*(i.h-r.h)+s;return t.css({left:g(A(a),o),top:g(A(u),s)}),this},alignTo:function(t,e){var n=this,i=n._,o=n._popup,s=t.parentNode&&r(t);if(!s)return n;var a=s.offset();if(a.left*a.top<0)return n.center();e=e||i.align;var u=F(e),l=u.align,c=!u.auto;l&&l.length||(l=["b"]);var d=n._dirClass;d&&o.removeClass(d);var f=i.fixed,h=E(),m=T(),v=N(o),g=R(o),b=j(t),x=N(s),C=R(s),_=b.left,k=b.top,z=f?_-m.x:_,q=f?k-m.y:k,L=f?0:m.x,S=f?0:m.y,I=L+h.w-v,M=S+h.h-g,$={t:"b",b:"t",l:"r",r:"l"},O={t:"top",b:"top",l:"left",r:"left"},P={},D=[{t:q-g,b:q+C,l:z-v,r:z+x},{t:q,b:q-g+C,l:z,r:z-v+x}],H={l:z+y((x-v)/2),t:q+y((C-g)/2)},B={left:[L,I],top:[S,M]};c||w(l,function(t,e){D[e][t]>B[O[t]][1]&&(t=l[e]=$[t]),D[e][t]<B[O[t]][0]&&(l[e]=$[t])});var V=l[0];l[1]||(l[1]="left"===O[V]?"t":"l",D[1][l[1]]=H[l[1]]),D[0][V]=D[0][V]+10*("tl".indexOf(V)!==-1?-1:1),P[O[l[0]]]=A(D[0][l[0]]),P[O[l[1]]]=A(D[1][l[1]]);var W=p+"-"+V;o.css(P).addClass(W),n._dirClass=W;var U=n.$("arrow",1),Z=n.$("inner",1);if(!U){if(!Z)return n;U=r('<div node-type="arrow" class="ui-arrow"><i></i><b></b></div>').appendTo(Z)}var Y,Q,X="top"!==O[V],G=["v","h"][1^X],J=N(U),K=R(U),tt={},et=X?"left":"top";switch(G){case"h":Y=y(_+(x-J)/2),tt.left=Y;break;case"v":Q=y(k+(C-K)/2),tt.top=Q}return U.offset(tt).css(et,""),n}}),i.zIndex=1024,i.current=null,n.exports=i}),define("lib/ui/box/1.0.1/dialog",["require","exports","module","jquery","../../../core/1.0.0/utils/util","../../../core/1.0.0/dom/delegator","./popup"],function(t,e,n){"use strict";var i=t("jquery"),r=t("../../../core/1.0.0/utils/util"),o=t("../../../core/1.0.0/dom/delegator"),s=t("./popup"),a=r.extend,u=r.guid,l=r.each,c=window.document,d={zIndex:1024,title:"",close:!0,clickBlankToHide:!1,content:'<span class="ui-box-loading">Loading..</span>',className:"",width:"",height:"",button:null,buttonClass:"ui-box-btn",buttonClassLight:"autofocus",html:'<div node-type="inner" class="ui-box"><a node-type="close" action-type="close" class="ui-box-iconf ui-box-close">x</a><div node-type="header" class="ui-box-hd"><div node-type="title" class="ui-box-title"></div></div><div node-type="body" class="ui-box-bd"><div node-type="content" class="ui-box-content"></div></div><div node-type="footer" class="ui-box-ft"><div node-type="button" class="ui-box-func"></div></div></div>'},f={},h=function(t){var e=t||(t={}),n=t.id||t.id||u(),r=h.get(n)||this;"string"!=typeof t&&1!==t.nodeType||(t={content:t}),t=a({},d,t),t.original=e;var o,s=t.button||(t.button=[]);if(i.isArray(o=s)||(o=[],s&&"object"==typeof s&&l(s,function(t,e){t.id=e,o.push(t)}),s=t.button=o),s.length>0){var c=!1;l(s,function(e,n){var i=e.id||u();e.autofocus&&(c=!0),t[i]&&a(e,t[i]),e.index=n}),c||(s[s.length-1].autofocus=!0)}return r.emit("init",t),r.initialized?r.options(t).focus():r.init(t),f[n]=r,r};r.inherits(h,s,{init:function(t){var e=this;s.call(e,t);var n=function(t){var n=t.actionValue===!1||t.isDefaultPrevented();n||e.hide()};e._delegator=new o(e.node,{context:e,onDelegate:n}),e.delegate("close",function(t){e.hide()}).once("render",function(){e.initComponents()}).on("destroy",function(){delete f[t.id],e._delegator.destroy()})},options:function(t){var e=this,t=a(e._,t);return e._freeze(!0),l(["title","content","width","height","action","button"],function(n,i){i=t[n],null!=i&&"function"==typeof e[n]&&e[n](i)}),e._freeze(!1).resize(),t.zIndex&&(s.zIndex=t.zIndex),e},initComponents:function(){var t=this,e=t._;t.$("header").hide(),t.$("footer").hide(),t.options(),e.close||t.$("close").css("display","none"),e.clickBlankToHide&&i(t.mask).on("onmousedown"in c?"mousedown":"click",function(){return t.hide(),!1});var n=function(e){var n=e.target,i=n.nodeName,r=/^input|textarea$/i,o=s.current===t,a=e.keyCode;!o||r.test(i)&&"button"!==n.type||27===a&&t.hide()};i(c).on("keydown",n),t.on("destroy",function(){i(c).off("keydown",n)})},delegate:function(t,e,n){var i=this._delegator;return i.on.apply(i,arguments),this},undelegate:function(t,e,n){var i=this._delegator;return i.un.apply(i,arguments),this},content:function(t){var e=this.$("content");return t&&t.nodeType?(i.contains(c,t)&&this.on("beforeremove",function(){i("body").append(t.hide())}),t=i(t),e.empty().append(t.show())):e.html(t),this.resize()},title:function(t){return this.$("title").html(t),this.$("header")[t?"show":"hide"](),this},width:function(t){return""!==t&&(this.$("content").css("width",t),this.resize()),this},height:function(t){return""!==t&&(this.$("content").css("height",t),this.resize()),this},button:function(t){t=t||[];var e=this,n=e._,i="",r=0,o=n.buttonClass;return"string"==typeof t?(i=t,r++):l(t,function(t,s){var a=t.id,u=t.fn||t.callback,l=t.display!==!1,c=t.className||o,d=[c];t.autofocus&&d.push(n.buttonClassLight),"function"==typeof u&&e.delegate(a,u),l&&r++,i+='<button type="button" action-type="'+a+'"'+(l?"":' style="display:none"')+(' class="'+d.join(" ")+'"')+(t.disabled?" disabled":"")+">"+(t.text||t.value)+"</button>"}),e.$("button").html(i),e.$("footer")[r?"show":"hide"](),e.resize(),e},action:function(t){var e=this;return l(t,function(t,n){e.delegate(n,t)}),e}}),h.getCurrent=function(){return s.current},h.get=function(t){return void 0===t?f:f[t]},h.config=function(t){t&&a(d,t)},n.exports=h}),define("lib/ui/box/1.0.1/messagebox",["require","exports","module","jquery","../../../core/1.0.0/utils/util","./drag","./dialog"],function(t,e,n){"use strict";var i=t("jquery"),r=t("../../../core/1.0.0/utils/util"),o=t("./drag"),s=t("./dialog"),a=r.each,u=r.extend,l=window.clearTimeout,c="//s1.zhongzhihui.com/lib/assets/images/loading/loading32x32.gif";!function(){var t=i('<i class="ui-box-iconf" style="position:absolute;left:-999em;top:-999em;">x<img src="'+c+'"</i>').appendTo("body");setTimeout(function(){t.remove(),t=null},50)}();var d={info:"&#x69;",warn:"&#x21;",confirm:"&#x3f;",ok:"&#x2714;",error:"&#x2718;",loading:'<img src="'+c+'" />'},f=function(t){var e=d[t];return e?'<i node-type="icon" class="x-icon ui-box-iconf">'+e+"</i>":""},h=r.guid("__x")+"$",m=function(t){return h+t},p=function(t,e){var n,i=e.xtype,r=i&&f(i)||e.iconHTML;return r&&(n=t?'<div node-type="text" class="x-text">'+t+"</div>":"",t=['<div class="ui-box-x-wrap">',r,n,"</div>"].join("")),t},v=function(t){var e=t.contentWindow;if(e)try{return e.document}catch(t){return 0}},g=function(t){var e;t.once("init",function(n){var i={};a(["title","width","height","button"],function(t){i[t]=n[t],delete n[t]}),t.once("load",function(){var n=t._;a(i,function(i,r){if(i)if("title"===r){if("auto"===i)try{i=e.contentWindow.document.title||""}catch(t){i=""}i&&t.title(i)}else"function"==typeof t[r]?t[r](i):n[r]=i})})}).once("render",function(){var n=t._;setTimeout(function(){e=y(t,n.url),t.iframeNode=e},30);var r=n.original;if(!(r instanceof Object))for(var o=function(){t.hide().destroy()},s=0;s<frames.length;s++)try{if(r instanceof frames[s].Object){i(frames[s]).one("unload",o);break}}catch(t){}}).once("beforeremove",function(){i(e).attr("src","about:blank").remove()},!1)},y=function(t,e){var n=t._,r=t.$("content"),o=r.find("iframe"),s=o&&o[0],a=function(e){t._freeze(!0),e&&(n.width||t.width(e.width),n.height||t.height(e.height)),t.emit("load"),t._freeze(!1).resize(),a=null,o.removeAttr("style"),o=s=null},u=function(e){n.showing?t.once("shown",e):e()};if(!o.length){var l=/(msie) ([\w.]+)/.test(navigator.userAgent.toLowerCase()),c='<iframe id="{id}-iframe" name="{id}-iframe" class="iframe" frameborder="0" hspace="0"'+(l?' allowtransparency="true"':"")+' scrolling="'+n.scrolling+'" style="position:absolute;left:-9999em;top:-9999em;" src="'+e+'"></iframe>';o=i(c.replace(/{id}/g,n.id)).appendTo(r),s=o[0],n.autoSize?o.one("load",function(){var t,e,n,r=v(s),l=r&&i(r);l&&(t=l.width(),o.width(t),e=l.height(),n={width:t,height:e}),u(function(){a(n)})}):u(function(){a()})}return s},b=function(t){var e=this;t=u({},t);var n=t.button||(t.button=[]);a(["cancel","ok"],function(e,i){var r=t[e];r&&"object"==typeof r&&(r.id=e,n.push(r),delete t[e])});var r=t.xtype;if(r)t.id=t.id||m(r),t.content=p(t.content,t),"none"!==r&&(t.className=(t.className||"")+" ui-box-x-"+r);else{var l=t.url;if(l){var c=t.close!==!1;t=u({modal:!0,close:!1,autoRelease:!0,autoSize:!0,scrolling:"auto"},t);var d=i(p("Loading...",{xtype:"loading"})).addClass("ui-box-x-loading");t.content=d,t.className=(t.className||"")+" ui-box-iframe",e.once("load",function(){d.remove(),d=null,c&&e.$("close").show()}),e.on("hidden",function(){e.destroy()}),g(e)}}return e=s.call(e,t)||e,e._ready||e.once("render",function(){var n=e.$("title");if(n.length&&t.drag!==!1){n.css("cursor","move");o.create(e.node,null,{hook:n,onstart:function(){e.anchor||e.focus()}})}}),e},x="__showDelay",w="__hideTimer";r.inherits(b,s,{show:function(t,e){var n=this,i=n._,o=[].slice.call(arguments),e=u({},i,e),s=e.duration||0,a=e.delay||0,c=function(){r.each([x,w],function(t,e){e=i[t],delete i[t],e&&l(e)})},d=function(){s>0&&(i[w]=setTimeout(function(){c(),n.hide()},s),n.once("hide",c)),b.__super__.show.apply(n,o)};return c(),a>0?i[x]=setTimeout(d,a):d(),n},hide:function(){var t=this,e=t._;return e&&r.each([x,w],function(t,n){n=e[t],delete e[t],n&&l(n)}),b.__super__.hide.apply(t,arguments),t}}),b.config=s.config,b.get=function(t){if(t){var e,n,i=s.get();if(t&&(e=t.frameElement))for(var r in i)if(i.hasOwnProperty(r)&&(n=i[r],n.iframeNode===e))return n;return i[t]}},n.exports=b}),define("lib/ui/box/1.0.1/box",["require","exports","module","./messagebox","../../../core/1.0.0/utils/util"],function(t,e,n){"use strict";var i=t("./messagebox"),r=t("../../../core/1.0.0/utils/util"),o=function(){},s=r.mix,a=function(t,e){var n=function(t,e){return void 0!==e&&null!==e&&""!==e&&!("number"==typeof e&&isNaN(e))};return function(t,e){return s(t,e,!0,!0,n)}}(),u=function(t){return!!(t&&t.nodeType&&t.tagName)},l=r.guid,c=function(){return l("__0x$")},d=function(t){var e,n=t[1]||{};e=t[0],e&&("string"==typeof e?n.html=e:"object"==typeof e&&(n=e));var i=n.skin;return i&&(n.className=i,delete n.skin),n},f=function(t,e){var e=d([t,e]);return new i(e)},h=function(t,e,n){"object"==typeof t?(n=e,e=t,t=""):u(e)?(n=e,e={}):"number"==typeof e&&(e={duration:e}),e=e||{};var i=f(a({id:c(),content:t,className:"ui-bubble",autofocus:!1,autoRelease:!0,close:!1,xtype:"none",align:"top",duration:2e3,hideWithAni:"fadeOut",showWithAni:"fadeInUp"},e));return e.hide?i:i.show(n)},m={create:f,loadUrl:function(t,e){e=e||{},e.url=t;var n=f(e);return n.show()},loading:function(t,e){e=e||{};var n=f(a({autofocus:!0,autoRelease:!0,id:c(),modal:!0,close:!1,xtype:"loading",content:t||""},e));return e.hide?n:n.show()},alert:function(t,e){return"function"==typeof e&&(e={ok:{fn:e}}),e=a({title:"提示",xtype:"info",className:"ui-box-alert",autofocus:!0,id:c(),modal:!0,autoRelease:!0,content:"<div>"+t+"</div>",ok:{text:"确定",fn:function(){}}},e),f(e).show()},confirm:function(t,e,n,i){var r;!i&&n&&"object"==typeof n&&(u(n)?i=n:r=n,n=e),"function"!=typeof e&&(r=e,e=o),"function"!=typeof n&&(n=e);var s=function(t){t?e(t):n(t)};r&&(i=i||r.sender);var l=f(a({xtype:"confirm",autofocus:!0,id:c(),modal:!i,autoRelease:!0,content:"<div>"+t+"</div>",close:!1,ok:{text:"确定",fn:function(){s(!0)}},cancel:{text:"取消",fn:function(){s(!1)}}},r));return l.show(i)},bubble:h};m.tips=m.bubble,r.each(["ok","info","warn","error"],function(t,e){m[t]=function(e,n,i){var r={xtype:t};return n&&n.nodeType?(i=n,n=void 0):"number"==typeof n?r.duration=n:r=a(r,n),h(e,r,i)}}),m.get=i.get,m.config=i.config,n.exports=m}),define("lib/core/1.0.0/io/request",["require","exports","module","jquery","../utils/util","../event/emitter"],function(t,e,n){"use strict";var i=t("jquery"),r=t("../utils/util"),o=t("../event/emitter"),s=r.setImmediate,a=r.noop,u=r.extend,l=i.trim,c=i.parseJSON,d=function(t,e,n){return function(i,r){try{return t.apply(e,arguments)}catch(t){n&&n(t,i,r)}}},f=function(t){return e.emit.apply(e,arguments)};o.applyTo(e);var h=function(){var t=5,e=0,n=[],r=function(){s(function(){--e,o()})},o=function(){if(n.length>0&&e<t){var o=n.shift(),s=o[0],a=o[1];++e,s.always(r),i.ajax(a)}};return function(t,e){n.push([t,e]),o()}}(),m=function(t){o.applyTo(this);var e={url:"",type:"GET",data:{},dataType:"json",timeout:3e4,cache:!1};t=u(e,t),delete t.error,delete t.success,this._opts=t};u(m.prototype,{send:function(){var t=this,e=this._opts,n=u({},e),i="jsonp"===n.dataType;return i&&(n.crossDomain=!0),n.complete=function(n,r){var o,s=+n.status,a=n.responseJSON,u={error:"1",msg:"Request error (status: "+(r||s)+")"},d=200===s||"success"===r;if(!i&&!a&&(a=l(n.responseText),a&&"<"!==a.charAt(0)))try{a=c(a)}catch(t){}d||(a=a||u),o={data:a,xhr:n,origin:e,status:s||r},d?t.emit("response",null,o):t.emit("error",a,o),t.emit("end",o),t.destroy()},h(t,n),t},always:function(t){return"function"==typeof t&&this.on("end",t),this},destroy:function(){this.un(),this._opts=null}}),e.on("request",function(t,e){if(e=e&&i(e)){var n="disabled";e.addClass(n).prop("disabled",!0),t.once("end",function(){e.removeClass(n).prop("disabled",!1),e=null})}}),e.ajax=function(t,e,n){"object"==typeof t&&(n=e,e=t,t=void 0),e=e||{},t&&(e.url=t);var r=new m(e),o=function(t,n){var i=t.stack&&t.stack.split("\n").slice(0,2).join("\n")||t,r={stack:i,origin:e,response:n};f("error",r,n),s(function(){console.log("%c "+i,"color:#ae0000")},1)},u=d(e.error||a,null,o),l=d(e.success||a,null,o);if(f("request",r,n)!==!1){if(n&&(n=i(n))){var c,h,p="data-async-lock";if(1===+n.attr(p))return;(h=n.attr("data-async-text"))&&(c=n.html(),n.html(h)),n.attr(p,1),r.once("response error",function(){n&&(n.attr(p,0),h&&n.html(c),n=null)})}return r.on("error",function(t,e){var n={code:t.error,message:t.msg,status:e.status,origin:e.origin,response:e.data};f("error",n,e)!==!1&&u(t)}),r.on("response",function(t,e){
if(e=e.data,f("response",e)!==!1)return t?void u(t):void(e&&0===+(e.error||0)?l(e):u(e))}),r.send()}},i.each(["get","post","jsonp"],function(t,n){e[n]=function(t,i,r,o,s){"function"==typeof i&&(s=s||o,o=r,r=i,i=void 0),o&&"function"!=typeof o&&(s=o,o=void 0);var a={data:i,success:r,error:o||r};"string"==typeof t?a.url=t:u(a,t);var l=n;return"jsonp"===n&&(l="get",a.dataType="jsonp"),a.type=l,e.ajax(a,s)}})}),function(t,e,n){"function"==typeof define&&define.amd?define("lib/plugins/lazyload/1.9.3/lazyload",["jquery"],n):t[e]=n(t.jQuery||t.Zepto)}(this,"Lazyload",function(t,e){"use strict";if(!t)throw"Error: jquery api not implements.";var n=t.each,i=function(t,e){if(t instanceof Array&&t.filter)return t.filter(e);for(var n=[],i=-1,r=t.length;++i<r;)e(t[i],i)&&n.push(t[i]);return n},r=function(t,e,n,i){var r;return function(){var o=i||this,s=arguments,a=function(){r=null,n||t.apply(o,s)},u=n&&!r;clearTimeout(r),r=setTimeout(a,e),u&&t.apply(o,s)}},o=function(e,n){e=e||{};var i=t(e),r=Array.prototype.slice;return n=n||e.name,t.each({on:"on",un:"off",once:"one",emit:"trigger"},function(t,o){e[t]=function(e){var s=r.call(arguments,0),a=s[1];return n&&!~e.indexOf(".")&&(s[0]=e+"."+n),"function"==typeof a&&("on"===t||"once"===t?s[1]=a.__||(a.__=function(t){return t.preventDefault(),a.apply(this,r.call(arguments,1))}):"un"===t&&(s[1]=a.__)),i[o].apply(i,s)}}),e},s=window,a=t(s),u=s.Image,l=/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion),c="__lazy_status__",d=0,f=1,h=2,m=function(t){return t[c]===e},p=function(){var t={},e=function(e,n){"function"==typeof n&&(t[e]=n)},n=function(e){return t[e]};return{define:e,get:n}}();p.define("image",function(n,i,r,o){if(!i)return void o("error");var s=new u,a=function(){s.onload=s.onerror=null,s=i=n=o=a=e};s.onload=function(){var e=t(n),s=r.effect;"function"!=typeof e[s]&&(s="show"),e.hide(),"IMG"===n.nodeName.toUpperCase()?e.attr("src",i):e.css("background-image",'url("'+i+'")'),e[s](r.effectSpeed),o(null,"load"),a()},s.onerror=function(t){o(t),a()},s.src=i}),p.define("html",function(t,e,n,i){i()});var v=function(e,u){u=u||{},e=t(e);var v=this,w={type:"image",threshold:50,failureLimit:0,event:"scroll",effect:"show",container:s,dataAttribute:"src",sourceMaker:null,skipInvisible:!0,appear:null,load:null,loadingClass:"",placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};o(v);var C=u.type||w.type,_=p.get(C);if("function"!=typeof _)throw"Error, cannot found the specific type loader (type: `"+C+"`)";"html"===C&&(w.placeholder=""),u&&t.extend(w,u);var A=w.container,k=w.event,z=0===k.indexOf("scroll"),T=A&&A!==s?t(A):a,q=function(e){var i=v._list;if(i.length>0){var r=0;n(i.slice(0),function(e,n){var i=t(n);if(!w.skipInvisible||i.is(":visible"))if(b(n,w)||x(n,w));else if(g(n,w)||y(n,w)){if(++r>w.failureLimit)return!1}else i.trigger("appear"),r=0})}else v.reset()},E=function(){v._list=i(v._list,function(t){return!t[c]})},j=function(){var e=this,n=t(e),i=n.attr("data-"+w.dataAttribute),r=w.sourceMaker,o=w.appear,s=w.loadingClass,a=e[c];a===d?(e[c]=f,s&&n.addClass(s),r&&(i=r(i,e)),o&&o.apply(v,[e,i]),_.call(v,e,i,w,function(t,r){if(!v._destroyed){if(s&&n.removeClass(s),t)setTimeout(function(){e[c]=d,v.emit("lazyItemError",e,i,t),e=null},300);else{e[c]=h,E(),v.emit("lazyItemReady",e,i,r);var o=w.load;o&&o.apply(v,[e,i,r]),e=null}n=null}})):a===h&&(E(),v.emit("lazyItemReady",e,i))},L=function(){this[c]||t(this).trigger("appear")},N=function(e){var n=t(e);e[c]=d;var i=w.placeholder;if(i)if(n.is("img")){var r=n.attr("src");r||n.attr("src",i)}else"image"===v._.type||n.children()[0]||n.html(i);n.on("appear",j),z||n.on(k,L),v._list.push(e)},R=function(t){t=i(t||[],m),t.length&&(n(t,function(t,e){N(e)}),v._inited||S(v))},S=function(e){if(!e._inited){var i=r(q,30);if(e._inited=!0,z&&T.on(k,i),a.on("resize",i),l){var o=function(i){i.originalEvent&&i.originalEvent.persisted&&n(e._list,function(e,n){t(n).trigger("appear")})};a.on("pageshow",o),e.once("reset",function(){a.off("pageshow",o)})}e.once("reset",function(){n(e._list,function(t,e){F(e)}),z&&T.off(k,i),a.off("resize",i)}),t(document).ready(q)}},F=function(e){var n=t(e);n.off("appear",j),z||n.off(k,L)};v.on("lazyItemReady",function(t){F(t)}),v.once("destroy",function(){R=null,q=null,E=null,j=null,L=null}),v._=w,v._list=[],v.add=function(e){var n=t(e);n.length>0&&R(n)},v.update=q,R(e)};v.prototype={constructor:v,update:function(){},peek:function(){var t=this._list,n=t.length;return n>0?t[0]:e},reset:function(){return this._inited?(this._inited=!1,this.emit("reset"),this._list.length=0,this):this},destroy:function(){this._destroyed||(this._destroyed=!0,this.reset().emit("destroy"),this.un(),this._=null)}},v.define=function(t,e){return p.define(t,e)};var g=function(e,n){var i,r=n.container;return i=r&&r!==s?t(r).offset().top+t(r).height():(s.innerHeight?s.innerHeight:a.height())+a.scrollTop(),i<=t(e).offset().top-n.threshold},y=function(e,n){var i,r=n.container;return i=r&&r!==s?t(r).offset().left+t(r).width():a.width()+a.scrollLeft(),i<=t(e).offset().left-n.threshold},b=function(e,n){var i,r=n.container;return i=r&&r!==s?t(r).offset().top:a.scrollTop(),i>=t(e).offset().top+n.threshold+t(e).height()},x=function(e,n){var i,r=n.container;return i=r&&r!==s?t(r).offset().left:a.scrollLeft(),i>=t(e).offset().left+n.threshold+t(e).width()},w=function(t,e){return!(y(t,e)||x(t,e)||g(t,e)||b(t,e))};return v.belowthefold=g,v.rightoffold=y,v.abovethetop=b,v.leftofbegin=x,v.inviewport=w,v}),function(t){"function"==typeof define&&define.amd?define("lib/plugins/validation/1.15.1/jquery-validate",["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(e){function i(){var i,r;return!n.settings.submitHandler||(n.submitButton&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),r=n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&i.remove(),void 0!==r&&r)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var e,n,i;return t(this[0]).is("form")?e=this.validate().form():(i=[],e=!0,n=t(this[0].form).validate(),this.each(function(){e=n.element(this)&&e,e||(i=i.concat(n.errorList))}),n.errorList=i),e},rules:function(e,n){var i,r,o,s,a,u,l=this[0];if(null!=l&&null!=l.form){if(e)switch(i=t.data(l.form,"validator").settings,r=i.rules,o=t.validator.staticRules(l),e){case"add":t.extend(o,t.validator.normalizeRule(n)),delete o.messages,r[l.name]=o,n.messages&&(i.messages[l.name]=t.extend(i.messages[l.name],n.messages));break;case"remove":return n?(u={},t.each(n.split(/\s/),function(e,n){u[n]=o[n],delete o[n],"required"===n&&t(l).removeAttr("aria-required")}),u):(delete r[l.name],o)}return s=t.validator.normalizeRules(t.extend({},t.validator.classRules(l),t.validator.attributeRules(l),t.validator.dataRules(l),t.validator.staticRules(l)),l),s.required&&(a=s.required,delete s.required,s=t.extend({required:a},s),t(l).attr("aria-required","true")),s.remote&&(a=s.remote,delete s.remote,s=t.extend(s,{remote:a})),s}}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){var n=t(e).val();return null!==n&&!!t.trim(""+n)},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:void 0===n?e:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(e,n){var i=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===n.which&&""===this.elementValue(e)||t.inArray(n.keyCode,i)!==-1||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}."),step:t.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){!this.form&&this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0]);var n=t.data(this.form,"validator"),i="on"+e.type.replace(/^validate/,""),r=n.settings;r[i]&&!t(this).is(r.ignore)&&r[i].call(n,this,e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})}),n=this.settings.rules,t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&t(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n,i,r=this.clean(e),o=this.validationTargetFor(r),s=this,a=!0;return void 0===o?delete this.invalid[r.name]:(this.prepareElement(o),this.currentElements=t(o),i=this.groups[o.name],i&&t.each(this.groups,function(t,e){e===i&&t!==o.name&&(r=s.validationTargetFor(s.clean(s.findByName(t))),r&&r.name in s.invalid&&(s.currentElements.push(r),a=s.check(r)&&a))}),n=this.check(o)!==!1,a=a&&n,n?this.invalid[o.name]=!1:this.invalid[o.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),t(e).attr("aria-invalid",!n)),a},showErrors:function(e){if(e){var n=this;t.extend(this.errorMap,e),this.errorList=t.map(this.errorMap,function(t,e){return{message:t,element:n.findByName(e)[0]}}),this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(t){var e;if(this.settings.unhighlight)for(e=0;t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,""),this.findByName(t[e].name).removeClass(this.settings.validClass);else t.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)t[e]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var i=this.name||t(this).attr("name");return!i&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=t(this).closest("form")[0]),!(i in n||!e.objectLength(t(this).rules()))&&(n[i]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([])},reset:function(){this.resetInternals(),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i,r=t(e),o=e.type;return"radio"===o||"checkbox"===o?this.findByName(e.name).filter(":checked").val():"number"===o&&"undefined"!=typeof e.validity?e.validity.badInput?"NaN":r.val():(n=e.hasAttribute("contenteditable")?r.text():r.val(),"file"===o?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(i=n.lastIndexOf("/"),i>=0?n.substr(i+1):(i=n.lastIndexOf("\\"),i>=0?n.substr(i+1):n)):"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,r,o=t(e).rules(),s=t.map(o,function(t,e){return e}).length,a=!1,u=this.elementValue(e);if("function"==typeof o.normalizer){if(u=o.normalizer.call(e,u),"string"!=typeof u)throw new TypeError("The normalizer should return a string value.");delete o.normalizer}for(i in o){r={method:i,parameters:o[i]};try{if(n=t.validator.methods[i].call(this,u,e,r.parameters),"dependency-mismatch"===n&&1===s){a=!0;continue}if(a=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,r),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",t),t instanceof TypeError&&(t.message+=".  Exception occurred when checking element "+e.id+", check the '"+r.method+"' method."),t}}if(!a)return this.objectLength(o)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){"string"==typeof n&&(n={method:n});var i=this.findDefined(this.customMessage(e.name,n.method),this.customDataMessage(e,n.method),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,n.parameters,e):r.test(i)&&(i=t.validator.format(i.replace(r,"{$1}"),n.parameters)),i},formatAndAdd:function(t,e){var n=this.defaultMessage(t,e);this.errorList.push({message:n,element:t,method:e.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i,r,o,s,a=this.errorsFor(e),u=this.idOrName(e),l=t(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(n)):(a=t("<"+this.settings.errorElement+">").attr("id",u+"-error").addClass(this.settings.errorClass).html(n||""),i=a,this.settings.wrapper&&(i=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,t(e)):i.insertAfter(e),a.is("label")?a.attr("for",u):0===a.parents("label[for='"+this.escapeCssMeta(u)+"']").length&&(o=a.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(o)+"\\b"))||(l+=" "+o):l=o,t(e).attr("aria-describedby",l),r=this.groups[e.name],r&&(s=this,t.each(s.groups,function(e,n){n===r&&t("[name='"+s.escapeCssMeta(e)+"']",s.currentForm).attr("aria-describedby",a.attr("id"))})))),!n&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var n=this.escapeCssMeta(this.idOrName(e)),i=t(e).attr("aria-describedby"),r="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(r=r+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(r)},escapeCssMeta:function(t){return t.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(e,n){return!!t(e,n.form).length},function:function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,t(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],t(e).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,n){return n="string"==typeof n&&n||"remote",t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:n})})},destroy:function(){this.resetForm(),t(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},normalizeAttributeRule:function(t,e,n,i){/min|max|step/.test(n)&&(null===e||/number|range|text/.test(e))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?t[n]=i:e===n&&"range"!==e&&(t[n]=!0)},attributeRules:function(e){var n,i,r={},o=t(e),s=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(i=e.getAttribute(n),""===i&&(i=!0),i=!!i):i=o.attr(n),this.normalizeAttributeRule(r,s,n,i);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var n,i,r={},o=t(e),s=e.getAttribute("type");for(n in t.validator.methods)i=o.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),this.normalizeAttributeRule(r,s,n,i);return r},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,r){if(r===!1)return void delete e[i];if(r.param||r.depends){var o=!0;switch(typeof r.depends){case"string":o=!!t(r.depends,n.form).length;break;case"function":o=r.depends.call(n,n)}o?e[i]=void 0===r.param||r.param:(t.data(n.form,"validator").resetElements(t(n)),delete e[i])}}),t.each(e,function(i,r){e[i]=t.isFunction(r)&&"normalizer"!==i?r(n):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var r=t(n).val();return r&&r.length>0}return this.checkable(n)?this.getLength(e,n)>0:e.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i},maxlength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r<=i},rangelength:function(e,n,i){var r=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||r>=i[0]&&r<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},step:function(e,n,i){var r,o=t(n).attr("type"),s="Step attribute on input type "+o+" is not supported.",a=["text","number","range"],u=new RegExp("\\b"+o+"\\b"),l=o&&!u.test(a.join()),c=function(t){var e=(""+t).match(/(?:\.(\d+))?$/);return e&&e[1]?e[1].length:0},d=function(t){return Math.round(t*Math.pow(10,r))},f=!0;if(l)throw new Error(s);return r=c(i),(c(e)>r||d(e)%d(i)!==0)&&(f=!1),this.optional(n)||f},equalTo:function(e,n,i){var r=t(i);return this.settings.onfocusout&&r.not(".validate-equalTo-blur").length&&r.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){t(n).valid()}),e===r.val()},remote:function(e,n,i,r){if(this.optional(n))return"dependency-mismatch";r="string"==typeof r&&r||"remote";var o,s,a,u=this.previousValue(n,r);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),u.originalMessage=u.originalMessage||this.settings.messages[n.name][r],this.settings.messages[n.name][r]=u.message,i="string"==typeof i&&{url:i}||i,a=t.param(t.extend({data:e},i.data)),u.old===a?u.valid:(u.old=a,o=this,this.startRequest(n),s={},s[n.name]=e,t.ajax(t.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:s,context:o.currentForm,success:function(t){var i,s,a,l=t===!0||"true"===t;o.settings.messages[n.name][r]=u.originalMessage,l?(a=o.formSubmitted,o.resetInternals(),o.toHide=o.errorsFor(n),o.formSubmitted=a,o.successList.push(n),o.invalid[n.name]=!1,o.showErrors()):(i={},s=t||o.defaultMessage(n,{method:r,parameters:e}),i[n.name]=u.message=s,o.invalid[n.name]=!0,o.showErrors(i)),u.valid=l,o.stopRequest(n,l)}},i)),"pending")}}});var e,n={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,i){var r=t.port;"abort"===t.mode&&(n[r]&&n[r].abort(),n[r]=i)}):(e=t.ajax,t.ajax=function(i){var r=("mode"in i?i:t.ajaxSettings).mode,o=("port"in i?i:t.ajaxSettings).port;return"abort"===r?(n[o]&&n[o].abort(),n[o]=e.apply(this,arguments),n[o]):e.apply(this,arguments)})}),function(t){"function"==typeof define&&define.amd?define("lib/plugins/validation/1.15.1/localization/messages_zh",["jquery","../jquery-validate"],t):t(jQuery)}(function(t){t.extend(t.validator.messages,{required:"这是必填字段",remote:"请修正此字段",email:"请输入有效的电子邮件地址",url:"请输入有效的网址",date:"请输入有效的日期",dateISO:"请输入有效的日期 (YYYY-MM-DD)",number:"请输入有效的数字",digits:"只能输入数字",creditcard:"请输入有效的信用卡号码",equalTo:"你的输入不相同",extension:"请输入有效的后缀",maxlength:t.validator.format("最多可以输入 {0} 个字符"),minlength:t.validator.format("最少要输入 {0} 个字符"),rangelength:t.validator.format("请输入长度在 {0} 到 {1} 之间的字符串"),range:t.validator.format("请输入范围在 {0} 到 {1} 之间的数值"),max:t.validator.format("请输入不大于 {0} 的数值"),min:t.validator.format("请输入不小于 {0} 的数值")})}),define("plugins/validator/1.0.0/validator",["require","exports","module","jquery","lib/plugins/validation/1.15.1/jquery-validate","lib/plugins/validation/1.15.1/localization/messages_zh"],function(t,e,n){"use strict";function i(t){var e=!0,n={11:1,12:1,13:1,14:1,15:1,21:1,22:1,23:1,31:1,32:1,33:1,34:1,35:1,36:1,37:1,41:1,42:1,43:1,44:1,45:1,46:1,50:1,51:1,52:1,53:1,54:1,61:1,62:1,63:1,64:1,65:1,71:1,81:1,82:1,91:1};if(t&&/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(t))if(n[t.substr(0,2)]){if(18==t.length){t=t.split("");for(var i=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=[1,0,"X",9,8,7,6,5,4,3,2],o=0,s=0,a=0,u=0;u<17;u++)s=t[u],a=i[u],o+=s*a;r[o%11];r[o%11]!=t[17]&&(e=!1)}}else e=!1;else e=!1;return e}var r=t("jquery");t("lib/plugins/validation/1.15.1/jquery-validate"),t("lib/plugins/validation/1.15.1/localization/messages_zh");var o=/^(\d{3,4}-?)?\d{7,9}$/,s=/^0?(13[0-9]|15[0-9]|17[678]|18[0-9]|14[57])[0-9]{8}$/,a=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,u=/^\d{5,20}$/,l=[{name:"email",text:r.validator.messages.email,func:function(t,e){return this.optional(e)||a.test(t)}},{name:"mobile",text:"请正确输入您的手机号码",func:function(t,e){return this.optional(e)||s.test(t)}},{name:"phone",text:"请正确输入您的电话号码",func:function(t,e){return this.optional(e)||o.test(t)||s.test(t)}},{name:"isIdCardNo",text:"请正确输入您的身份证号码",func:function(t,e){return this.optional(e)||i(t)}},{name:"isNoneMalformed",text:"请不要输入特殊字符",func:function(t,e){return this.optional(e)||!/[\[\]`~!@#$^&*()=|{}'":;,.<>\/?！￥…（）—|【】‘；：“”。，、？%+ 　\\]/.test(t)}},{name:"isFinanceBankCardno",text:"银行卡号格式不正确，请重新输入(不包含空格或者-等连接符号)",func:function(t,e){return this.optional(e)||u.test(t)}},{name:"realname",text:"姓名需2-10个汉字之间",func:function(t,e){return this.optional(e)||/([\u4e00-\u9fa5]{2,4})/.test(t)}},{name:"qq",text:"请输入5-10位QQ号码",func:function(t,e){return this.optional(e)||/^\d{5,10}$/.test(t)}},{name:"wechat",text:"请输入6-20个字母,数字,— ,_以字母开头",func:function(t,e){return this.optional(e)||/^[a-zA-Z]{1}[-_a-zA-Z0-9]{5,19}$/.test(t)}},{name:"password",text:"请输入正确的密码",func:function(t,e){return this.optional(e)||/^(?=.{6,16}$)(?![0-9]+$)(?!.*(.).*\1)[0-9a-zA-Z]+$/}}];r.each(l,function(t,e){r.validator.addMethod(e.name,e.func,e.text)})}),define("lib/core/1.0.0/utils/form",["require","exports","module","jquery"],function(t,e,n){"use strict";function i(t){return l.createElement(t)}function r(t){return"number"==typeof t||"string"==typeof t&&isNaN(parseFloat(t))}function o(t,e){var n=typeof t;switch(n){case"number":return isFinite(t);case"null":case"undefined":return!1;default:return n&&(!e||""!==t)}}function s(t){var e=s.d||(s.d=i("i"));return e.innerHTML=t,e.innerText||e.textContent}function a(t){for(var e,n=t.length;n--;)e=t[n],o(e)||t.splice(n,1);return t;
}var u=t("jquery"),l=window.document,c=u.trim,d="placeholder"in i("input"),f="[]",h=/INPUT|TEXTAREA|SELECT/,m=function(t,e,n){u(t).find("[name]").each(function(t,i){var r=u(i).attr("name"),a=e[r];if(r.indexOf("[")>-1){var l=r.replace(/\]/g,"").split("["),t=0,c=null;for(a=e;c=l[t++];){if(!a[c]){a=void 0;break}a=a[c]}}if(!o(a)){if(n!==!0)return;a=""}if("string"==typeof a&&a.indexOf("&")>-1&&(a=s(a)),a=String(a),"radio"===i.type)i.checked=i.value===a;else if("checkbox"===i.type)i.checked=a;else if(d)i.value=a;else{var f=u(i);i.value!==a&&""!==a&&f.data("changed",!0),""===a?f.data("changed",!1).val(f.attr("placeholder")):i.value=a}})},p=function(t,e){var n={},i=!1,o=u(t).get(),s=o[0];return s?("FORM"===s.nodeName&&(o=s.elements),"boolean"==typeof e?(i=e,e={}):(e=e||{},i=e.convert,i=void 0!==i&&i),e.semantic&&(o=s.getElementsByTagName("*")),o.length?(u.each(o,function(t,o){var s=o.type&&o.type.toLowerCase();if("submit"!==s&&o.name&&!o.disabled){var l=u(o),d=o.name,m=h.test(o.tagName)?l.val():l.attr("value")||"";if("radio"!==o.type||o.checked){if("checkbox"===o.type&&(m=o.checked),l.data("changed")!==!0&&m===l.attr("placeholder")&&(m=""),i){if(r(m)){var p=parseFloat(m),v=p+"";m.indexOf(".")>0&&(v=p.toFixed(m.split(".")[1].length)),v===m&&(m=p)}else"true"===m?m=!0:"false"===m&&(m=!1);""===m&&(m=void 0)}"string"!=typeof m||e.raw||(m=c(m));for(var g,y=n,b=e.nameSep||f,x=a(d.split(b)),w=d.indexOf("[]")===d.length-2,t=-1,C=x.length-1;++t<C;)y[x[t]]||(y[x[t]]={}),y=y[x[t]];g=x[x.length-1],w||y[g]?(y[g]instanceof Array||(y[g]=void 0===y[g]?[]:[y[g]]),y[g].push(m)):y[g]||(y[g]=m)}}}),n):n):n};e.serializeForm=p,e.setFormData=m}),define("conf/login",["require","exports","module","jquery","lib/ui/box/1.0.1/box","lib/core/1.0.0/io/request","lib/plugins/lazyload/1.9.3/lazyload","plugins/validator/1.0.0/validator","lib/core/1.0.0/utils/form"],function(t,e,n){"use strict";function i(t){for(var e=0;e<u.length;e++)if(t.indexOf(u[e]))return!0;return!1}var r=t("jquery"),o=t("lib/ui/box/1.0.1/box"),s=t("lib/core/1.0.0/io/request"),a=(t("lib/plugins/lazyload/1.9.3/lazyload"),t("plugins/validator/1.0.0/validator"),t("lib/core/1.0.0/utils/form")),u=["www.baidu.com","www.google.com"];r.validator.addMethod("lms",function(t,e,n){var i=/^0?(13[0-9]|15[0-9]|17[678]|18[0-9]|14[57])[0-9]{8}$/;return i.test(t)?(r(".jsVerifyCode").hasClass("change")||r(n).removeClass("ui-btn-disable"),this.optional(e)||!0):(r(n).addClass("ui-btn-disable"),!1)},r.validator.format("请输入正确的手机号")),r("#jRightLoginMobile").validate({submitHandler:function(t){var e=a.serializeForm(t);s.get($PAGE_DATA.mobileLogin,e,function(t){o.ok("登陆成功");var e=document.referrer;setTimeout(function(){e.indexOf("zhongzhihui.com")||i(e)?location.href=e:location.href="www.zhongzhihui.com"},2e3)},function(t){return t.msg?o.error(t.msg):o.error("网络错误"),!1})},errorPlacement:function(t,e){t.appendTo(e.parent()),r(e).parent().addClass("error")},rules:{mobile:{lms:".jsVerifyCode",required:!0,mobile:!0}},messages:{mobile:{required:"请输入手机号",mobile:"请正确地填写你的手机号"}}}),r("#jLoginForm").validate({rules:{username:{required:!0,mobile:!0},password:{required:!0,minlength:6}},errorPlacement:function(t,e){t.appendTo(e.parent()),r(e).parent().addClass("error")},success:function(t){t.html("&nbsp;").addClass("checked"),t.parent().removeClass("error")},messages:{username:{required:"请输入手机或邮箱",mobile:"请输入正确的手机号或邮箱地址"},password:{required:"请输入密码",minlength:"密码长度不能小于6个字符"}},submitHandler:function(t){var e=a.serializeForm(t);s.get($PAGE_DATA.normalLogin,e,function(t){o.ok("登陆成功");var e=document.referrer;setTimeout(function(){console.log(e.indexOf("zhongzhihui.com")),console.log(i(e)),e.indexOf("zhongzhihui.com")||i(e)?location.href=e:location.href="www.zhongzhihui.com"},2e3)},function(t){t.msg?o.error(t.msg):o.error("网络错误")})}}),r(".jsTab").on("click","span",function(){return!r(this).hasClass("active")&&(r(this).addClass("active").siblings().removeClass("active"),void r(".mod-login form").toggle())}),r(".jsVerifyCode").on("click",function(){var t=r(this);if(t.hasClass("ui-btn-disable"))return!1;s.get($PAGE_DATA.code,{mobile:r("#jMobile").val()},function(t){},function(t){t.msg?o.error(t.msg):o.error("网络错误")});var e=60;t.val(e).addClass("ui-btn-disable change");var n=setInterval(function(){e>1?(e--,t.val(e)):(t.removeClass("ui-btn-disable change").val("获取验证码"),clearInterval(n))},1e3)})});